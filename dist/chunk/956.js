/*! For license information please see 956.js.LICENSE.txt */
(self.webpackJsonp=self.webpackJsonp||[]).push([[956],{"1221":function(d,v,m){"use strict";m.d(v,{"A":function(){return _objectSpread2}});var w=m(6065);function ownKeys(d,v){var m=Object.keys(d);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(d);v&&(w=w.filter((function(v){return Object.getOwnPropertyDescriptor(d,v).enumerable}))),m.push.apply(m,w)}return m}function _objectSpread2(d){for(var v=1;v<arguments.length;v++){var m=null!=arguments[v]?arguments[v]:{};v%2?ownKeys(Object(m),!0).forEach((function(v){(0,w.A)(d,v,m[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(m)):ownKeys(Object(m)).forEach((function(v){Object.defineProperty(d,v,Object.getOwnPropertyDescriptor(m,v))}))}return d}},"2282":function(d,v,m){var w;d=m.nmd(d),function(){"use strict";var k={"function":!0,"object":!0},S=k[typeof window]&&window||this,C=k[typeof v]&&v,_=k.object&&d&&!d.nodeType&&d,E=C&&_&&"object"==typeof m.g&&m.g;!E||E.global!==E&&E.window!==E&&E.self!==E||(S=E);var O=Math.pow(2,53)-1,T=/\bOpera/,z=Object.prototype,P=z.hasOwnProperty,M=z.toString;function capitalize(d){return(d=String(d)).charAt(0).toUpperCase()+d.slice(1)}function format(d){return d=trim(d),/^(?:webOS|i(?:OS|P))/.test(d)?d:capitalize(d)}function forOwn(d,v){for(var m in d)P.call(d,m)&&v(d[m],m,d)}function getClassOf(d){return null==d?capitalize(d):M.call(d).slice(8,-1)}function qualify(d){return String(d).replace(/([ -])(?!$)/g,"$1?")}function reduce(d,v){var m=null;return function each(d,v){var m=-1,w=d?d.length:0;if("number"==typeof w&&w>-1&&w<=O)for(;++m<w;)v(d[m],m,d);else forOwn(d,v)}(d,(function(w,k){m=v(m,w,k,d)})),m}function trim(d){return String(d).replace(/^ +| +$/g,"")}var j=function parse(d){var v=S,m=d&&"object"==typeof d&&"String"!=getClassOf(d);m&&(v=d,d=null);var w=v.navigator||{},k=w.userAgent||"";d||(d=k);var C,_,E=m?!!w.likeChrome:/\bChrome\b/.test(d)&&!/internal|\n/i.test(M.toString()),O="Object",z=m?O:"ScriptBridgingProxyObject",P=m?O:"Environment",j=m&&v.java?"JavaPackage":getClassOf(v.java),W=m?O:"RuntimeObject",R=/\bJava/.test(j)&&v.java,B=R&&getClassOf(v.environment)==P,N=R?"a":"α",$=R?"b":"β",D=v.document||{},H=v.operamini||v.opera,G=T.test(G=m&&H?H["[[Class]]"]:getClassOf(H))?G:H=null,X=d,V=[],U=null,K=d==k,Y=K&&H&&"function"==typeof H.version&&H.version(),Q=function getLayout(v){return reduce(v,(function(v,m){return v||RegExp("\\b"+(m.pattern||qualify(m))+"\\b","i").exec(d)&&(m.label||m)}))}([{"label":"EdgeHTML","pattern":"Edge"},"Trident",{"label":"WebKit","pattern":"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),J=function getName(v){return reduce(v,(function(v,m){return v||RegExp("\\b"+(m.pattern||qualify(m))+"\\b","i").exec(d)&&(m.label||m)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{"label":"Microsoft Edge","pattern":"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{"label":"Samsung Internet","pattern":"SamsungBrowser"},"SeaMonkey",{"label":"Silk","pattern":"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{"label":"SRWare Iron","pattern":"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{"label":"Yandex Browser","pattern":"YaBrowser"},{"label":"UC Browser","pattern":"UCBrowser"},"Opera Mini",{"label":"Opera Mini","pattern":"OPiOS"},"Opera",{"label":"Opera","pattern":"OPR"},"Chromium","Chrome",{"label":"Chrome","pattern":"(?:HeadlessChrome)"},{"label":"Chrome Mobile","pattern":"(?:CriOS|CrMo)"},{"label":"Firefox","pattern":"(?:Firefox|Minefield)"},{"label":"Firefox for iOS","pattern":"FxiOS"},{"label":"IE","pattern":"IEMobile"},{"label":"IE","pattern":"MSIE"},"Safari"]),Z=getProduct([{"label":"BlackBerry","pattern":"BB10"},"BlackBerry",{"label":"Galaxy S","pattern":"GT-I9000"},{"label":"Galaxy S2","pattern":"GT-I9100"},{"label":"Galaxy S3","pattern":"GT-I9300"},{"label":"Galaxy S4","pattern":"GT-I9500"},{"label":"Galaxy S5","pattern":"SM-G900"},{"label":"Galaxy S6","pattern":"SM-G920"},{"label":"Galaxy S6 Edge","pattern":"SM-G925"},{"label":"Galaxy S7","pattern":"SM-G930"},{"label":"Galaxy S7 Edge","pattern":"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{"label":"Kindle Fire","pattern":"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{"label":"Wii U","pattern":"WiiU"},"Wii","Xbox One",{"label":"Xbox 360","pattern":"Xbox"},"Xoom"]),tt=function getManufacturer(v){return reduce(v,(function(v,m,w){return v||(m[Z]||m[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Z)]||RegExp("\\b"+qualify(w)+"(?:\\b|\\w*\\d)","i").exec(d))&&w}))}({"Apple":{"iPad":1,"iPhone":1,"iPod":1},"Alcatel":{},"Archos":{},"Amazon":{"Kindle":1,"Kindle Fire":1},"Asus":{"Transformer":1},"Barnes & Noble":{"Nook":1},"BlackBerry":{"PlayBook":1},"Google":{"Google TV":1,"Nexus":1},"HP":{"TouchPad":1},"HTC":{},"Huawei":{},"Lenovo":{},"LG":{},"Microsoft":{"Xbox":1,"Xbox One":1},"Motorola":{"Xoom":1},"Nintendo":{"Wii U":1,"Wii":1},"Nokia":{"Lumia":1},"Oppo":{},"Samsung":{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},"Sony":{"PlayStation":1,"PlayStation Vita":1},"Xiaomi":{"Mi":1,"Redmi":1}}),et=function getOS(v){return reduce(v,(function(v,m){var w=m.pattern||qualify(m);return!v&&(v=RegExp("\\b"+w+"(?:/[\\d.]+|[ \\w.]*)","i").exec(d))&&(v=function cleanupOS(d,v,m){var w={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return v&&m&&/^Win/i.test(d)&&!/^Windows Phone /i.test(d)&&(w=w[/[\d.]+$/.exec(d)])&&(d="Windows "+w),d=String(d),v&&m&&(d=d.replace(RegExp(v,"i"),m)),format(d.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(v,w,m.label||m)),v}))}(["Windows Phone","KaiOS","Android","CentOS",{"label":"Chrome OS","pattern":"CrOS"},"Debian",{"label":"DragonFly BSD","pattern":"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function getProduct(v){return reduce(v,(function(v,m){var w=m.pattern||qualify(m);return!v&&(v=RegExp("\\b"+w+" *\\d+[.\\w_]*","i").exec(d)||RegExp("\\b"+w+" *\\w+-[\\w]*","i").exec(d)||RegExp("\\b"+w+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(d))&&((v=String(m.label&&!RegExp(w,"i").test(m.label)?m.label:v).split("/"))[1]&&!/[\d.]+/.test(v[0])&&(v[0]+=" "+v[1]),m=m.label||m,v=format(v[0].replace(RegExp(w,"i"),m).replace(RegExp("; *(?:"+m+"[_-])?","i")," ").replace(RegExp("("+m+")[-_.]?(\\w)","i"),"$1 $2"))),v}))}function getVersion(v){return reduce(v,(function(v,m){return v||(RegExp(m+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(d)||0)[1]||null}))}if(Q&&(Q=[Q]),/\bAndroid\b/.test(et)&&!Z&&(C=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(d))&&(Z=trim(C[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),tt&&!Z?Z=getProduct([tt]):tt&&Z&&(Z=Z.replace(RegExp("^("+qualify(tt)+")[-_.\\s]","i"),tt+" ").replace(RegExp("^("+qualify(tt)+")[-_.]?(\\w)","i"),tt+" $2")),(C=/\bGoogle TV\b/.exec(Z))&&(Z=C[0]),/\bSimulator\b/i.test(d)&&(Z=(Z?Z+" ":"")+"Simulator"),"Opera Mini"==J&&/\bOPiOS\b/.test(d)&&V.push("running in Turbo/Uncompressed mode"),"IE"==J&&/\blike iPhone OS\b/.test(d)?(tt=(C=parse(d.replace(/like iPhone OS/,""))).manufacturer,Z=C.product):/^iP/.test(Z)?(J||(J="Safari"),et="iOS"+((C=/ OS ([\d_]+)/i.exec(d))?" "+C[1].replace(/_/g,"."):"")):"Konqueror"==J&&/^Linux\b/i.test(et)?et="Kubuntu":tt&&"Google"!=tt&&(/Chrome/.test(J)&&!/\bMobile Safari\b/i.test(d)||/\bVita\b/.test(Z))||/\bAndroid\b/.test(et)&&/^Chrome/.test(J)&&/\bVersion\//i.test(d)?(J="Android Browser",et=/\bAndroid\b/.test(et)?et:"Android"):"Silk"==J?(/\bMobi/i.test(d)||(et="Android",V.unshift("desktop mode")),/Accelerated *= *true/i.test(d)&&V.unshift("accelerated")):"UC Browser"==J&&/\bUCWEB\b/.test(d)?V.push("speed mode"):"PaleMoon"==J&&(C=/\bFirefox\/([\d.]+)\b/.exec(d))?V.push("identifying as Firefox "+C[1]):"Firefox"==J&&(C=/\b(Mobile|Tablet|TV)\b/i.exec(d))?(et||(et="Firefox OS"),Z||(Z=C[1])):!J||(C=!/\bMinefield\b/i.test(d)&&/\b(?:Firefox|Safari)\b/.exec(J))?(J&&!Z&&/[\/,]|^[^(]+?\)/.test(d.slice(d.indexOf(C+"/")+8))&&(J=null),(C=Z||tt||et)&&(Z||tt||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(et))&&(J=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(et)?et:C)+" Browser")):"Electron"==J&&(C=(/\bChrome\/([\d.]+)\b/.exec(d)||0)[1])&&V.push("Chromium "+C),Y||(Y=getVersion(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",qualify(J),"(?:Firefox|Minefield|NetFront)"])),(C=("iCab"==Q&&parseFloat(Y)>3?"WebKit":/\bOpera\b/.test(J)&&(/\bOPR\b/.test(d)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(d)&&!/^(?:Trident|EdgeHTML)$/.test(Q)&&"WebKit"||!Q&&/\bMSIE\b/i.test(d)&&("Mac OS"==et?"Tasman":"Trident")||"WebKit"==Q&&/\bPlayStation\b(?! Vita\b)/i.test(J)&&"NetFront")&&(Q=[C]),"IE"==J&&(C=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(d)||0)[1])?(J+=" Mobile",et="Windows Phone "+(/\+$/.test(C)?C:C+".x"),V.unshift("desktop mode")):/\bWPDesktop\b/i.test(d)?(J="IE Mobile",et="Windows Phone 8.x",V.unshift("desktop mode"),Y||(Y=(/\brv:([\d.]+)/.exec(d)||0)[1])):"IE"!=J&&"Trident"==Q&&(C=/\brv:([\d.]+)/.exec(d))&&(J&&V.push("identifying as "+J+(Y?" "+Y:"")),J="IE",Y=C[1]),K){if(function isHostType(d,v){var m=null!=d?typeof d[v]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(m)||"object"==m&&!d[v])}(v,"global"))if(R&&(X=(C=R.lang.System).getProperty("os.arch"),et=et||C.getProperty("os.name")+" "+C.getProperty("os.version")),B){try{Y=v.require("ringo/engine").version.join("."),J="RingoJS"}catch(d){(C=v.system)&&C.global.system==v.system&&(J="Narwhal",et||(et=C[0].os||null))}J||(J="Rhino")}else"object"==typeof v.process&&!v.process.browser&&(C=v.process)&&("object"==typeof C.versions&&("string"==typeof C.versions.electron?(V.push("Node "+C.versions.node),J="Electron",Y=C.versions.electron):"string"==typeof C.versions.nw&&(V.push("Chromium "+Y,"Node "+C.versions.node),J="NW.js",Y=C.versions.nw)),J||(J="Node.js",X=C.arch,et=C.platform,Y=(Y=/[\d.]+/.exec(C.version))?Y[0]:null));else getClassOf(C=v.runtime)==z?(J="Adobe AIR",et=C.flash.system.Capabilities.os):getClassOf(C=v.phantom)==W?(J="PhantomJS",Y=(C=C.version||null)&&C.major+"."+C.minor+"."+C.patch):"number"==typeof D.documentMode&&(C=/\bTrident\/(\d+)/i.exec(d))?(Y=[Y,D.documentMode],(C=+C[1]+4)!=Y[1]&&(V.push("IE "+Y[1]+" mode"),Q&&(Q[1]=""),Y[1]=C),Y="IE"==J?String(Y[1].toFixed(1)):Y[0]):"number"==typeof D.documentMode&&/^(?:Chrome|Firefox)\b/.test(J)&&(V.push("masking as "+J+" "+Y),J="IE",Y="11.0",Q=["Trident"],et="Windows");et=et&&format(et)}if(Y&&(C=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Y)||/(?:alpha|beta)(?: ?\d)?/i.exec(d+";"+(K&&w.appMinorVersion))||/\bMinefield\b/i.test(d)&&"a")&&(U=/b/i.test(C)?"beta":"alpha",Y=Y.replace(RegExp(C+"\\+?$"),"")+("beta"==U?$:N)+(/\d+\+?/.exec(C)||"")),"Fennec"==J||"Firefox"==J&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(et))J="Firefox Mobile";else if("Maxthon"==J&&Y)Y=Y.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Z))"Xbox 360"==Z&&(et=null),"Xbox 360"==Z&&/\bIEMobile\b/.test(d)&&V.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(J)&&(!J||Z||/Browser|Mobi/.test(J))||"Windows CE"!=et&&!/Mobi/i.test(d))if("IE"==J&&K)try{null===v.external&&V.unshift("platform preview")}catch(d){V.unshift("embedded")}else(/\bBlackBerry\b/.test(Z)||/\bBB10\b/.test(d))&&(C=(RegExp(Z.replace(/ +/g," *")+"/([.\\d]+)","i").exec(d)||0)[1]||Y)?(et=((C=[C,/BB10/.test(d)])[1]?(Z=null,tt="BlackBerry"):"Device Software")+" "+C[0],Y=null):this!=forOwn&&"Wii"!=Z&&(K&&H||/Opera/.test(J)&&/\b(?:MSIE|Firefox)\b/i.test(d)||"Firefox"==J&&/\bOS X (?:\d+\.){2,}/.test(et)||"IE"==J&&(et&&!/^Win/.test(et)&&Y>5.5||/\bWindows XP\b/.test(et)&&Y>8||8==Y&&!/\bTrident\b/.test(d)))&&!T.test(C=parse.call(forOwn,d.replace(T,"")+";"))&&C.name&&(C="ing as "+C.name+((C=C.version)?" "+C:""),T.test(J)?(/\bIE\b/.test(C)&&"Mac OS"==et&&(et=null),C="identify"+C):(C="mask"+C,J=G?format(G.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(C)&&(et=null),K||(Y=null)),Q=["Presto"],V.push(C));else J+=" Mobile";(C=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(d)||0)[1])&&(C=[parseFloat(C.replace(/\.(\d)$/,".0$1")),C],"Safari"==J&&"+"==C[1].slice(-1)?(J="WebKit Nightly",U="alpha",Y=C[1].slice(0,-1)):Y!=C[1]&&Y!=(C[2]=(/\bSafari\/([\d.]+\+?)/i.exec(d)||0)[1])||(Y=null),C[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(d)||0)[1],537.36==C[0]&&537.36==C[2]&&parseFloat(C[1])>=28&&"WebKit"==Q&&(Q=["Blink"]),K&&(E||C[1])?(Q&&(Q[1]="like Chrome"),C=C[1]||((C=C[0])<530?1:C<532?2:C<532.05?3:C<533?4:C<534.03?5:C<534.07?6:C<534.1?7:C<534.13?8:C<534.16?9:C<534.24?10:C<534.3?11:C<535.01?12:C<535.02?"13+":C<535.07?15:C<535.11?16:C<535.19?17:C<536.05?18:C<536.1?19:C<537.01?20:C<537.11?"21+":C<537.13?23:C<537.18?24:C<537.24?25:C<537.36?26:"Blink"!=Q?"27":"28")):(Q&&(Q[1]="like Safari"),C=(C=C[0])<400?1:C<500?2:C<526?3:C<533?4:C<534?"4+":C<535?5:C<537?6:C<538?7:C<601?8:C<602?9:C<604?10:C<606?11:C<608?12:"12"),Q&&(Q[1]+=" "+(C+="number"==typeof C?".x":/[.+]/.test(C)?"":"+")),"Safari"==J&&(!Y||parseInt(Y)>45)?Y=C:"Chrome"==J&&/\bHeadlessChrome/i.test(d)&&V.unshift("headless")),"Opera"==J&&(C=/\bzbov|zvav$/.exec(et))?(J+=" ",V.unshift("desktop mode"),"zvav"==C?(J+="Mini",Y=null):J+="Mobile",et=et.replace(RegExp(" *"+C+"$"),"")):"Safari"==J&&/\bChrome\b/.exec(Q&&Q[1])?(V.unshift("desktop mode"),J="Chrome Mobile",Y=null,/\bOS X\b/.test(et)?(tt="Apple",et="iOS 4.3+"):et=null):/\bSRWare Iron\b/.test(J)&&!Y&&(Y=getVersion("Chrome")),Y&&0==Y.indexOf(C=/[\d.]+$/.exec(et))&&d.indexOf("/"+C+"-")>-1&&(et=trim(et.replace(C,""))),et&&-1!=et.indexOf(J)&&!RegExp(J+" OS").test(et)&&(et=et.replace(RegExp(" *"+qualify(J)+" *"),"")),Q&&!/\b(?:Avant|Nook)\b/.test(J)&&(/Browser|Lunascape|Maxthon/.test(J)||"Safari"!=J&&/^iOS/.test(et)&&/\bSafari\b/.test(Q[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(J)&&Q[1])&&(C=Q[Q.length-1])&&V.push(C),V.length&&(V=["("+V.join("; ")+")"]),tt&&Z&&Z.indexOf(tt)<0&&V.push("on "+tt),Z&&V.push((/^on /.test(V[V.length-1])?"":"on ")+Z),et&&(C=/ ([\d.+]+)$/.exec(et),_=C&&"/"==et.charAt(et.length-C[0].length-1),et={"architecture":32,"family":C&&!_?et.replace(C[0],""):et,"version":C?C[1]:null,"toString":function(){var d=this.version;return this.family+(d&&!_?" "+d:"")+(64==this.architecture?" 64-bit":"")}}),(C=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(X))&&!/\bi686\b/i.test(X)?(et&&(et.architecture=64,et.family=et.family.replace(RegExp(" *"+C),"")),J&&(/\bWOW64\b/i.test(d)||K&&/\w(?:86|32)$/.test(w.cpuClass||w.platform)&&!/\bWin64; x64\b/i.test(d))&&V.unshift("32-bit")):et&&/^OS X/.test(et.family)&&"Chrome"==J&&parseFloat(Y)>=39&&(et.architecture=64),d||(d=null);var nt={};return nt.description=d,nt.layout=Q&&Q[0],nt.manufacturer=tt,nt.name=J,nt.prerelease=U,nt.product=Z,nt.ua=d,nt.version=J&&Y,nt.os=et||{"architecture":null,"family":null,"version":null,"toString":function(){return"null"}},nt.parse=parse,nt.toString=function toStringPlatform(){return this.description||""},nt.version&&V.unshift(Y),nt.name&&V.unshift(J),et&&J&&(et!=String(et).split(" ")[0]||et!=J.split(" ")[0]&&!Z)&&V.push(Z?"("+et+")":"on "+et),V.length&&(nt.description=V.join(" ")),nt}();S.platform=j,void 0===(w=function(){return j}.call(v,m,v,d))||(d.exports=w)}.call(this)},"2684":function(d,v,m){"use strict";function __rest(d,v){var m={};for(var w in d)Object.prototype.hasOwnProperty.call(d,w)&&v.indexOf(w)<0&&(m[w]=d[w]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(w=Object.getOwnPropertySymbols(d);k<w.length;k++)v.indexOf(w[k])<0&&Object.prototype.propertyIsEnumerable.call(d,w[k])&&(m[w[k]]=d[w[k]])}return m}function __awaiter(d,v,m,w){return new(m||(m=Promise))((function(k,S){function fulfilled(d){try{step(w.next(d))}catch(d){S(d)}}function rejected(d){try{step(w.throw(d))}catch(d){S(d)}}function step(d){d.done?k(d.value):function adopt(d){return d instanceof m?d:new m((function(v){v(d)}))}(d.value).then(fulfilled,rejected)}step((w=w.apply(d,v||[])).next())}))}m.d(v,{"_":function(){return __rest},"a":function(){return __awaiter}}),"function"==typeof SuppressedError&&SuppressedError},"3704":function(d,v,m){"use strict";m.d(v,{"Hl":function(){return j},"_V":function(){return W},"Ss":function(){return R}});var w=m(758);const helper_manipulatePropsFunction=(d,v={})=>{const{"dangerouslySetInnerHTML":m,"style":w}=d;return"string"!=typeof w&&(v.style=w),Object.assign(Object.assign({},v),{"dangerouslySetInnerHTML":m})};var k=m(1951);const S=(0,k.w$)(class extends k.wt{"constructor"(){super(),this.__registerHost(),this.onLongTap=(0,k.lh)(this,"longtap",7),this.onTouchStart=()=>{this.timer=setTimeout((()=>{this.onLongTap.emit()}),500)},this.onTouchMove=()=>{clearTimeout(this.timer)},this.onTouchEnd=()=>{clearTimeout(this.timer)},this.canvasId=void 0,this.height=void 0,this.width=void 0,this.nativeProps={}}"componentDidRender"(){const[d]=this.el.children;if(!this.height||!this.width){let v=window.getComputedStyle(d);this.height||(this.height=v.height),this.width||(this.width=v.width)}d.height=parseInt(this.height),d.width=parseInt(this.width)}"render"(){const{"canvasId":d,"nativeProps":v}=this;return(0,k.h)("canvas",Object.assign({"canvas-id":d,"style":{"width":"100%","height":"100%"},"onTouchStart":this.onTouchStart,"onTouchMove":this.onTouchMove,"onTouchCancel":this.onTouchEnd,"onTouchEnd":this.onTouchEnd},v))}get"el"(){return this}static get"style"(){return"taro-canvas-core{width:300px;height:150px;display:block;position:relative}"}},[0,"taro-canvas-core",{"canvasId":[1,"id"],"height":[1537],"width":[1537],"nativeProps":[16]}]);const C=function defineCustomElement$1(){if("undefined"==typeof customElements)return;["taro-canvas-core"].forEach((d=>{if("taro-canvas-core"===d)customElements.get(d)||customElements.define(d,S)}))};var _=m(5498);const E=(0,k.w$)(class extends k.wt{"constructor"(){super(),this.__registerHost(),this.onLoad=(0,k.lh)(this,"load",7),this.onError=(0,k.lh)(this,"error",7),this.src=void 0,this.mode="scaleToFill",this.lazyLoad=!1,this.nativeProps={},this.aspectFillMode="width",this.didLoad=!1}"componentDidLoad"(){if(!this.lazyLoad)return;const d=new IntersectionObserver((v=>{v[v.length-1].isIntersecting&&(d.unobserve(this.imgRef),this.didLoad=!0)}),{"rootMargin":"300px 0px"});d.observe(this.imgRef)}"imageOnLoad"(){const{"width":d,"height":v,"naturalWidth":m,"naturalHeight":w}=this.imgRef;this.onLoad.emit({"width":d,"height":v}),this.aspectFillMode=m>w?"width":"height"}"imageOnError"(d){this.onError.emit(d)}"render"(){const{"src":d,"lazyLoad":v=!1,"aspectFillMode":m="width","imageOnLoad":w,"imageOnError":S,"nativeProps":C,"didLoad":E}=this,O=this.mode||"scaleToFill",T=(0,_.c)({"taro-img__widthfix":"widthFix"===O}),z=(0,_.c)(`taro-img__mode-${O.toLowerCase().replace(/\s/g,"")}`,{[`taro-img__mode-aspectfill--${m}`]:"aspectFill"===O});return(0,k.h)(k.xr,{"class":T},d?(0,k.h)("img",Object.assign({"ref":d=>this.imgRef=d,"class":z,"src":v&&!E?void 0:d,"onLoad":w.bind(this),"onError":S.bind(this)},C)):"")}static get"style"(){return'img[src=""]{opacity:0}taro-image-core{width:auto;height:auto;font-size:0;display:inline-block;position:relative;overflow:hidden}.taro-img.taro-img__widthfix{height:100%}.taro-img__mode-scaletofill{width:100%;height:100%}.taro-img__mode-aspectfit{max-width:100%;max-height:100%}.taro-img__mode-aspectfill{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.taro-img__mode-aspectfill--width{min-width:100%;height:100%}.taro-img__mode-aspectfill--height{width:100%;min-height:100%}.taro-img__mode-widthfix{width:100%}.taro-img__mode-heightfix{height:100%}.taro-img__mode-top{width:100%}.taro-img__mode-bottom{width:100%;position:absolute;bottom:0}.taro-img__mode-left{height:100%}.taro-img__mode-right{height:100%;position:absolute;right:0}.taro-img__mode-topright{position:absolute;right:0}.taro-img__mode-bottomleft{position:absolute;bottom:0}.taro-img__mode-bottomright{position:absolute;bottom:0;right:0}'}},[0,"taro-image-core",{"src":[1],"mode":[1],"lazyLoad":[4,"lazy-load"],"nativeProps":[16],"aspectFillMode":[32],"didLoad":[32]}]);const O=function taro_image_core_defineCustomElement$1(){if("undefined"==typeof customElements)return;["taro-image-core"].forEach((d=>{if("taro-image-core"===d)customElements.get(d)||customElements.define(d,E)}))};const T=(0,k.w$)(class extends k.wt{"constructor"(){super(),this.__registerHost(),this.onLongPress=(0,k.lh)(this,"longpress",7),this.startTime=0,this.animation=void 0,this.hoverClass=void 0,this.hoverStartTime=50,this.hoverStayTime=400,this.hover=!1,this.touch=!1}"onTouchStart"(){this.hoverClass&&(this.touch=!0,setTimeout((()=>{this.touch&&(this.hover=!0)}),this.hoverStartTime)),this.timeoutEvent=setTimeout((()=>{this.onLongPress.emit()}),350),this.startTime=Date.now()}"onTouchMove"(){clearTimeout(this.timeoutEvent)}"onTouchEnd"(){Date.now()-this.startTime<350&&clearTimeout(this.timeoutEvent),this.hoverClass&&(this.touch=!1,setTimeout((()=>{this.touch||(this.hover=!1)}),this.hoverStayTime))}"componentDidRender"(){!function handleStencilNodes(d){var v;null===(v=null==d?void 0:d.childNodes)||void 0===v||v.forEach((d=>{d.nodeType===document.COMMENT_NODE&&d["s-cn"]&&(d["s-cn"]=!1),d.nodeType!==document.COMMENT_NODE&&d["s-sr"]&&(d["s-sr"]=!1)}))}(this.el)}"render"(){const d=(0,_.c)({[`${this.hoverClass}`]:this.hover});let v={};return this.animation&&(v.animation=this.animation,v["data-animation"]=this.animation),(0,k.h)(k.xr,Object.assign({"class":d},v),(0,k.h)("slot",null))}get"el"(){return this}static get"style"(){return"body,html{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}taro-view-core{display:block}"}},[4,"taro-view-core",{"animation":[1],"hoverClass":[1,"hover-class"],"hoverStartTime":[2,"hover-start-time"],"hoverStayTime":[2,"hover-stay-time"],"hover":[32],"touch":[32]},[[1,"touchstart","onTouchStart"],[1,"touchmove","onTouchMove"],[1,"touchend","onTouchEnd"]]]);const z=function taro_view_core_defineCustomElement$1(){if("undefined"==typeof customElements)return;["taro-view-core"].forEach((d=>{if("taro-view-core"===d)customElements.get(d)||customElements.define(d,T)}))};var P=m(5482);const mergeRefs=(...d)=>v=>{d.forEach((d=>{((d,v)=>{"function"==typeof d?d(v):null!=d&&(d.current=v)})(d,v)}))},camelToDashCase=d=>d.replace(/([A-Z])/g,(d=>`-${d[0].toLowerCase()}`));var M=m(8143);const arrayToMap=d=>{const v=new Map;return d.forEach((d=>v.set(d,d))),v};function getComponentName(d){return d.tagName.replace(/^TARO-/,"").replace(/-CORE$/,"")}function getControlledValue(d){const v=getComponentName(d);return["INPUT","TEXTAREA","SLIDER","PICKER"].includes(v)?"value":"SWITCH"===v?"checked":null}function finishedEventHandler(d){const v=getControlledValue(d);if(!v)return;(0,M.flushSync)((()=>{}));const m=function getPropsAfterReactUpdate(d){const v=Object.keys(d).find((d=>d.includes("__reactProps")));return v?d[v]:null}(d);(null==m?void 0:m.hasOwnProperty(v))&&m[v]!==d[v]&&(d[v]=m[v],d.setAttribute(v,m[v]))}const syncEvent=(d,v,m)=>{const w=d.__events||(d.__events={}),k=w[v];if(m){if(k){if(k.fn===m)return;d.removeEventListener(v,k)}const S=w[v]=function(v){(0,M.unstable_batchedUpdates)((()=>m.call(this,v))),finishedEventHandler(d)};S.fn=m,d.addEventListener(v,S)}else k&&d.removeEventListener(v,k)},attachProps=(d,v,m={})=>{if(d instanceof Element){Object.keys(m).forEach((m=>{if(!["style","children","ref","class","className","forwardedRef"].includes(m)&&!v.hasOwnProperty(m))if(/^on([A-Z].*)/.test(m)){const v=m.substring(2).toLowerCase();syncEvent(d,v)}else d[m]=null,d.removeAttribute(camelToDashCase(m))})),d.className=((d,v,m)=>{const w=v.className||v.class,k=m.className||m.class,S=arrayToMap(d),C=arrayToMap(w?w.split(" "):[]),_=arrayToMap(k?k.split(" "):[]),E=[];return S.forEach((d=>{C.has(d)?(E.push(d),C.delete(d)):_.has(d)||E.push(d)})),C.forEach((d=>E.push(d))),E.join(" ")})(d.classList,v,m),Object.keys(v).forEach((m=>{if(!("style"===m&&"string"!=typeof v[m]||["children","ref","class","className","forwardedRef"].includes(m)))if(/^on([A-Z].*)/.test(m)){const w=m.substring(2).toLowerCase();syncEvent(d,w,v[m])}else{d[m]=v[m];"string"===typeof v[m]&&d.setAttribute(camelToDashCase(m),v[m])}}));const w=getControlledValue(d);if(w&&v.hasOwnProperty(w)){const v=["INPUT","TEXTAREA"].includes(getComponentName(d))?"input":"change";d.__events||(d.__events={}),d.__events.hasOwnProperty(v)||syncEvent(d,v,(function(){}))}}};const createComponent_createReactComponent=(d,v,m,k)=>{void 0!==k&&k();const S=d.toLowerCase().split("-").map((d=>d.charAt(0).toUpperCase()+d.slice(1))).join("");const C=class extends w.Component{"constructor"(d){super(d),this.setComponentElRef=d=>{this.componentEl=d}}"componentDidMount"(){!function applyUnControlledDefaultValue(d,v){const m=getControlledValue(d);if(!m)return;const w="default"+m.charAt(0).toUpperCase()+m.slice(1);!v.hasOwnProperty(m)&&v.hasOwnProperty(w)&&(d[m]=v[w],d.setAttribute(m,v[w]))}(this.componentEl,this.props),this.componentDidUpdate(this.props)}"componentDidUpdate"(d){attachProps(this.componentEl,this.props,d)}"render"(){const v=this.props,{"children":k,"forwardedRef":S,"className":C,"ref":_,"style":E}=v,O=(0,P.Tt)(v,["children","forwardedRef","className","ref","style"]);let T=Object.keys(O).reduce(((d,v)=>{const m=O[v];if(0===v.indexOf("on")&&v[2]===v[2].toUpperCase()){v.substring(2).toLowerCase();0}else{["string","boolean","number"].includes(typeof m)&&(d[camelToDashCase(v)]=m)}return d}),{});m&&(T=m(this.props,T));const z=Object.assign(Object.assign({},T),{"ref":mergeRefs(S,this.setComponentElRef)});return(0,w.createElement)(d,z,k)}static get"displayName"(){return S}};return v&&(C.contextType=v),((d,v)=>{const forwardRef=(v,m)=>w.createElement(d,Object.assign({},v,{"forwardedRef":m}));return forwardRef.displayName=v,w.forwardRef(forwardRef)})(C,S)},j=createComponent_createReactComponent("taro-canvas-core",void 0,helper_manipulatePropsFunction,C),W=createComponent_createReactComponent("taro-image-core",void 0,helper_manipulatePropsFunction,O),R=createComponent_createReactComponent("taro-view-core",void 0,helper_manipulatePropsFunction,z)},"6070":function(d,v,m){"use strict";d.exports=m(7462)},"7462":function(d,v,m){"use strict";var w=m(758),k=Symbol.for("react.element"),S=Symbol.for("react.fragment"),C=Object.prototype.hasOwnProperty,_=w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E={"key":!0,"ref":!0,"__self":!0,"__source":!0};function q(d,v,m){var w,S={},O=null,T=null;for(w in void 0!==m&&(O=""+m),void 0!==v.key&&(O=""+v.key),void 0!==v.ref&&(T=v.ref),v)C.call(v,w)&&!E.hasOwnProperty(w)&&(S[w]=v[w]);if(d&&d.defaultProps)for(w in v=d.defaultProps)void 0===S[w]&&(S[w]=v[w]);return{"$$typeof":k,"type":d,"key":O,"ref":T,"props":S,"_owner":_.current}}v.jsx=q,v.jsxs=q},"7500":function(d,v){var m;!function(){"use strict";var w={}.hasOwnProperty;function classNames(){for(var d="",v=0;v<arguments.length;v++){var m=arguments[v];m&&(d=appendClass(d,parseValue(m)))}return d}function parseValue(d){if("string"==typeof d||"number"==typeof d)return d;if("object"!=typeof d)return"";if(Array.isArray(d))return classNames.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var v="";for(var m in d)w.call(d,m)&&d[m]&&(v=appendClass(v,m));return v}function appendClass(d,v){return v?d?d+" "+v:d+v:d}d.exports?(classNames.default=classNames,d.exports=classNames):void 0===(m=function(){return classNames}.apply(v,[]))||(d.exports=m)}()},"8731":function(d,v,m){"use strict";m.d(v,{"C":function(){return w}});var w={"className":"","style":{}}},"8956":function(d,v,m){"use strict";m.r(v),m.d(v,{"default":function(){return Rt}});var w=m(6065),k=m(6061),S=m(8930),C=m(2684),_=m(758),E=m(7500),O=m.n(E),T=m(3704),z=m(8731),P=m(6363),M=m(1663),j=m(3143),W=m(2075),R=m(2751),B=m(9246);function _createForOfIteratorHelper(d,v){var m="undefined"!=typeof Symbol&&d[Symbol.iterator]||d["@@iterator"];if(!m){if(Array.isArray(d)||(m=(0,B.A)(d))||v&&d&&"number"==typeof d.length){m&&(d=m);var w=0,k=function F(){};return{"s":k,"n":function n(){return w>=d.length?{"done":!0}:{"done":!1,"value":d[w++]}},"e":function e(d){throw d},"f":k}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var S,C=!0,_=!1;return{"s":function s(){m=m.call(d)},"n":function n(){var d=m.next();return C=d.done,d},"e":function e(d){_=!0,S=d},"f":function f(){try{C||null==m.return||m.return()}finally{if(_)throw S}}}}var N=m(5482),$={"top":"top","bottom":"bottom","middle":"middle","normal":"alphabetic","hanging":"hanging","alphabetic":"alphabetic","ideographic":"ideographic"},D=function(){return(0,M.A)((function CanvasContext(d,v){(0,P.A)(this,CanvasContext),this.actions=[],this.canvas=d,this.ctx=v}),[{"key":"ctx","get":function get(){return this.__raw__||{}},"set":function set(d){this.__raw__=d}},{"key":"emptyActions","value":function emptyActions(){this.actions.length=0}},{"key":"enqueueActions","value":function enqueueActions(d){for(var v=arguments.length,m=new Array(v>1?v-1:0),w=1;w<v;w++)m[w-1]=arguments[w];this.actions.push({"func":d,"args":m})}},{"key":"fillStyle","get":function get(){return this.ctx.fillStyle},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.fillStyle=d}))}},{"key":"font","get":function get(){return this.ctx.font},"set":function set(d){this.ctx.font=d}},{"key":"globalAlpha","get":function get(){return this.ctx.globalAlpha},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.globalAlpha=d}))}},{"key":"globalCompositeOperation","get":function get(){return this.ctx.globalCompositeOperation},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.globalCompositeOperation=d}))}},{"key":"lineCap","get":function get(){return this.ctx.lineCap},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.lineCap=d}))}},{"key":"lineDashOffset","get":function get(){return this.ctx.lineDashOffset},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.lineDashOffset=d}))}},{"key":"lineJoin","get":function get(){return this.ctx.lineJoin},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.lineJoin=d}))}},{"key":"lineWidth","get":function get(){return this.ctx.lineWidth},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.lineWidth=d}))}},{"key":"miterLimit","get":function get(){return this.ctx.miterLimit},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.miterLimit=d}))}},{"key":"shadowBlur","get":function get(){return this.ctx.shadowBlur},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.shadowBlur=d}))}},{"key":"shadowColor","get":function get(){return this.ctx.shadowColor},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.shadowColor=d}))}},{"key":"shadowOffsetX","get":function get(){return this.ctx.shadowOffsetX},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.shadowOffsetX=d}))}},{"key":"shadowOffsetY","get":function get(){return this.ctx.shadowOffsetY},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.shadowOffsetY=d}))}},{"key":"strokeStyle","get":function get(){return this.ctx.strokeStyle},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.strokeStyle=d}))}},{"key":"textAlign","get":function get(){return this.ctx.textAlign},"set":function set(d){this.ctx.textAlign=d}},{"key":"textBaseline","get":function get(){return this.ctx.textBaseline},"set":function set(d){this.ctx.textBaseline=d}},{"key":"direction","get":function get(){return this.ctx.direction},"set":function set(d){this.ctx.direction=d}},{"key":"imageSmoothingEnabled","get":function get(){return this.ctx.imageSmoothingEnabled},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.imageSmoothingEnabled=d}))}},{"key":"imageSmoothingQuality","get":function get(){return this.ctx.imageSmoothingQuality},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.imageSmoothingQuality=d}))}},{"key":"filter","get":function get(){return this.ctx.filter},"set":function set(d){var v=this;this.enqueueActions((function(){v.ctx.filter=d}))}},{"key":"arc","value":function arc(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.arc].concat(v))}},{"key":"arcTo","value":function arcTo(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.arcTo].concat(v))}},{"key":"beginPath","value":function beginPath(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.beginPath].concat(v))}},{"key":"bezierCurveTo","value":function bezierCurveTo(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.bezierCurveTo].concat(v))}},{"key":"clearRect","value":function clearRect(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.clearRect].concat(v))}},{"key":"clip","value":function clip(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.clip].concat(v))}},{"key":"closePath","value":function closePath(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.closePath].concat(v))}},{"key":"createPattern","value":function createPattern(d,v){var m=this;if("string"==typeof d){var w=new Image;return w.src=d,new Promise((function(d,k){w.onload=function(){d(m.ctx.createPattern(w,v))},w.onerror=k}))}return this.ctx.createPattern(d,v)}},{"key":"draw","value":function draw(d,v){return(0,N.sH)(this,void 0,void 0,(0,k.A)().mark((function _callee(){var m,w,S,C,_;return(0,k.A)().wrap((function _callee$(k){for(;;)switch(k.prev=k.next){case 0:k.prev=0,d||this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),m=_createForOfIteratorHelper(this.actions),k.prev=3,m.s();case 5:if((w=m.n()).done){k.next=11;break}return S=w.value,C=S.func,_=S.args,k.next=9,C.apply(this.ctx,_);case 9:k.next=5;break;case 11:k.next=16;break;case 13:k.prev=13,k.t0=k.catch(3),m.e(k.t0);case 16:return k.prev=16,m.f(),k.finish(16);case 19:this.emptyActions(),v&&v(),k.next=26;break;case 23:throw k.prev=23,k.t1=k.catch(0),{"errMsg":k.t1.message};case 26:case"end":return k.stop()}}),_callee,this,[[0,23],[3,13,16,19]])})))}},{"key":"drawImage","value":function drawImage(d){for(var v=this,m=arguments.length,w=new Array(m>1?m-1:0),k=1;k<m;k++)w[k-1]=arguments[k];this.enqueueActions((function(){var m;if("string"==typeof d){var k=new Image;return k.src=d,new Promise((function(d,m){k.onload=function(){var m;(m=v.ctx).drawImage.apply(m,[k].concat(w)),d()},k.onerror=m}))}(m=v.ctx).drawImage.apply(m,[d].concat(w))}))}},{"key":"fill","value":function fill(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.fill].concat(v))}},{"key":"fillRect","value":function fillRect(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.fillRect].concat(v))}},{"key":"fillText","value":function fillText(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.fillText].concat(v))}},{"key":"lineTo","value":function lineTo(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.lineTo].concat(v))}},{"key":"moveTo","value":function moveTo(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.moveTo].concat(v))}},{"key":"quadraticCurveTo","value":function quadraticCurveTo(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.quadraticCurveTo].concat(v))}},{"key":"rect","value":function rect(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.rect].concat(v))}},{"key":"reset","value":function reset(){return this.ctx.reset()}},{"key":"restore","value":function restore(){return this.ctx.restore()}},{"key":"rotate","value":function rotate(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.rotate].concat(v))}},{"key":"save","value":function save(){return this.ctx.save()}},{"key":"scale","value":function scale(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.scale].concat(v))}},{"key":"setFillStyle","value":function setFillStyle(d){var v=this;this.enqueueActions((function(){v.ctx.fillStyle=d}))}},{"key":"setFontSize","value":function setFontSize(d){var v=this.font.split(/\s/),m=v.findIndex((function(d){return/^\d+px$/.test(d)}));-1!==m&&(v[m]="".concat(d,"px"),this.font=v.join(" "))}},{"key":"setGlobalAlpha","value":function setGlobalAlpha(d){this.globalAlpha=d}},{"key":"setLineCap","value":function setLineCap(d){this.lineCap=d}},{"key":"setLineDash","value":function setLineDash(d,v){var m=this;this.enqueueActions((function(){m.ctx.setLineDash(d),m.ctx.lineDashOffset=v}))}},{"key":"setLineJoin","value":function setLineJoin(d){this.lineJoin=d}},{"key":"setLineWidth","value":function setLineWidth(d){this.lineWidth=d}},{"key":"setMiterLimit","value":function setMiterLimit(d){this.miterLimit=d}},{"key":"setShadow","value":function setShadow(d,v,m,w){var k=this;this.enqueueActions((function(){k.ctx.shadowOffsetX=d,k.ctx.shadowOffsetY=v,k.ctx.shadowColor=w,k.ctx.shadowBlur=m}))}},{"key":"setStrokeStyle","value":function setStrokeStyle(d){var v=this;this.enqueueActions((function(){v.ctx.strokeStyle=d}))}},{"key":"setTextAlign","value":function setTextAlign(d){this.textAlign=d}},{"key":"setTextBaseline","value":function setTextBaseline(d){this.textBaseline=$[d]||"alphabetic"}},{"key":"setTransform","value":function setTransform(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.setTransform].concat(v))}},{"key":"stroke","value":function stroke(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.stroke].concat(v))}},{"key":"strokeRect","value":function strokeRect(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.strokeRect].concat(v))}},{"key":"strokeText","value":function strokeText(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.strokeText].concat(v))}},{"key":"transform","value":function transform(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.transform].concat(v))}},{"key":"translate","value":function translate(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return this.enqueueActions.apply(this,[this.ctx.translate].concat(v))}},{"key":"measureText","value":function measureText(d){return this.ctx.measureText(d)}},{"key":"createCircularGradient","value":function createCircularGradient(d,v,m){return this.ctx.createRadialGradient(d,v,0,d,v,m)}},{"key":"createLinearGradient","value":function createLinearGradient(d,v,m,w){return this.ctx.createLinearGradient(d,v,m,w)}}])}(),H=function(){return(0,M.A)((function NodesRef(d,v,m){(0,P.A)(this,NodesRef),this._component=v._component,this._selector=d,this._selectorQuery=v,this._single=m}),[{"key":"context","value":function context(d){var v=this._selector,m=this._component,w=this._single,k=this._selectorQuery;return k._push(v,m,w,{"context":!0},d),k}},{"key":"node","value":function node(d){var v=this._selector,m=this._component,w=this._single,k=this._selectorQuery;return k._push(v,m,w,{"nodeCanvasType":!0,"node":!0},d),k}},{"key":"boundingClientRect","value":function boundingClientRect(d){var v=this._selector,m=this._component,w=this._single,k=this._selectorQuery;return k._push(v,m,w,{"id":!0,"dataset":!0,"rect":!0,"size":!0},d),k}},{"key":"scrollOffset","value":function scrollOffset(d){var v=this._selector,m=this._component,w=this._single,k=this._selectorQuery;return k._push(v,m,w,{"id":!0,"dataset":!0,"scrollOffset":!0},d),k}},{"key":"fields","value":function fields(d,v){var m=this._selector,w=this._component,k=this._single,S=this._selectorQuery,C=d.id,_=d.dataset,E=d.rect,O=d.size,T=d.scrollOffset,z=d.context,P=d.node,M=d.properties,j=void 0===M?[]:M,W=d.computedStyle,R=void 0===W?[]:W;return S._push(m,w,k,{"id":C,"dataset":_,"rect":E,"size":O,"scrollOffset":T,"context":z,"node":P,"nodeCanvasType":P,"properties":j,"computedStyle":R},v),S}}])}();function filter(d,v,m){if(!v)return null;var w=".taro_page"===m,k=d.id,S=d.dataset,C=d.rect,_=d.size,E=d.scrollOffset,O=d.properties,T=void 0===O?[]:O,z=d.computedStyle,P=void 0===z?[]:z,M=d.nodeCanvasType,j=d.node,W=d.context,R={};if(M&&j){var B=v.tagName;if(R.node={"id":v.id,"$taroElement":v},/^taro-canvas-core/i.test(B)){var N=v.type||"";R.nodeCanvasType=N;var $=v.getElementsByTagName("canvas")[0];/^(2d|webgl)/i.test(N)&&$?R.node=$:R.node=null}else/^taro-scroll-view-core/i.test(B)?(R.nodeCanvasType="",R.node=v,v.scrollTo=v.mpScrollToMethod,v.scrollIntoView=v.mpScrollIntoViewMethod):(R.nodeCanvasType="",R.node=v);return R}if(!W){if(k&&(R.id=v.id),S&&(R.dataset=Object.assign({},v.dataset)),C||_){var H=v.getBoundingClientRect(),G=H.left,X=H.right,V=H.top,U=H.bottom,K=H.width,Y=H.height;C&&(w?(R.left=0,R.right=0,R.top=0,R.bottom=0):(R.left=G,R.right=X,R.top=V,R.bottom=U)),_&&(w?(R.width=v.clientWidth,R.height=v.clientHeight):(R.width=K,R.height=Y))}if(E&&(R.scrollLeft=v.scrollLeft,R.scrollTop=v.scrollTop),T.length&&T.forEach((function(d){var m=v.getAttribute(d);m&&(R[d]=m)})),P.length){var Q=window.getComputedStyle(v);P.forEach((function(d){var v=Q.getPropertyValue(d)||Q[d];v&&(R[d]=v)}))}return R}var J=v.tagName;if(/^taro-video-core/i.test(J))return{"context":v};if(/^taro-canvas-core/i.test(J)){var Z=v.type||"2d",tt=null==v?void 0:v.querySelector("canvas"),et=null==tt?void 0:tt.getContext(Z);return{"context":new D(tt,et)}}/^taro-live-player-core/i.test(J)?console.error("暂时不支持通过 NodesRef.context 获取 LivePlayerContext"):/^taro-editor-core/i.test(J)?console.error("暂时不支持通过 NodesRef.context 获取 EditorContext"):/^taro-map-core/i.test(J)&&console.error("暂时不支持通过 NodesRef.context 获取 MapContext")}var G=function(){return(0,M.A)((function SelectorQuery(){(0,P.A)(this,SelectorQuery),this._defaultWebviewId=null,this._webviewId=null,this._queue=[],this._queueCb=[],this._component}),[{"key":"in","value":function _in(d){return this._component=d,this}},{"key":"select","value":function select(d){return"string"==typeof d&&(d=d.replace(">>>",">")),new H(d,this,!0)}},{"key":"selectAll","value":function selectAll(d){return"string"==typeof d&&(d=d.replace(">>>",">")),new H(d,this,!1)}},{"key":"selectViewport","value":function selectViewport(){return new H(".taro_page",this,!0)}},{"key":"exec","value":function exec(d){var v=this;return j.A.nextTick((function(){!function queryBat(d,v){var m=[];d.forEach((function(d){var v,w=d.selector,k=d.single,S=d.fields,C=d.component,_=null!==C&&(0,R.wI)(C)||document,E=!1;if(_!==document){var O=null===(v=_.parentNode)||void 0===v?void 0:v.querySelectorAll(w);if(O)for(var T=0,z=O.length;T<z;++T)if(_===O[T]){E=!0;break}}if(k){var P=!0===E?_:_.querySelector(w);m.push(filter(S,P,w))}else{var M=_.querySelectorAll(w),j=[];!0===E&&j.push(_);for(var W=0,B=M.length;W<B;++W)j.push(M[W]);m.push(j.map((function(d){return filter(S,d)})))}})),v(m)}(v._queue,(function(m){var w=v._queueCb;m.forEach((function(d,m){var k=w[m];(0,W.Tn)(k)&&k.call(v,d)})),(0,W.Tn)(d)&&d.call(v,m)}))})),this}},{"key":"_push","value":function _push(d,v,m,w){var k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._queue.push({"component":v,"selector":d,"single":m,"fields":w}),this._queueCb.push(k)}}])}(),X=function createSelectorQuery(){return new G},V=function(){return(0,M.A)((function MiniLru(d){if((0,P.A)(this,MiniLru),d<=0)throw new Error("Cache capacity must be a positive number");this.cache=new Map,this.capacity=d}),[{"key":"get","value":function get(d){if(this.cache.has(d)){var v=this.cache.get(d);return this.cache.delete(d),this.cache.set(d,v),v}return null}},{"key":"set","value":function set(d,v){this.cache.has(d)?this.cache.delete(d):this.cache.size>=this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(d,v)}},{"key":"has","value":function has(d){return this.cache.has(d)}}])}(),U="undefined"!=typeof document&&!!document.scripts;var K=function getRect(d){var v=d;if(function isWindow(d){return d===window}(v)){var m=v.innerWidth,w=v.innerHeight;return{"top":0,"left":0,"right":m,"bottom":w,"width":m,"height":w}}return v&&v.getBoundingClientRect?v.getBoundingClientRect():{"top":0,"left":0,"right":0,"bottom":0,"width":0,"height":0}},Y=new V(10);var Q=function getRectByTaro(d){return(0,C.a)(void 0,void 0,void 0,(0,k.A)().mark((function _callee(){return(0,k.A)().wrap((function _callee$(v){for(;;)switch(v.prev=v.next){case 0:if(!d){v.next=4;break}if(!U){v.next=3;break}return v.abrupt("return",Promise.resolve(K(d)));case 3:return v.abrupt("return",new Promise((function(v,m){Y.has(d)?v(Y.get(d)):X().select("#".concat(d.uid)).boundingClientRect().exec((function(m){var w=(0,S.A)(m,1)[0];w&&Y.set(d,w),v(w)}))})));case 4:return v.abrupt("return",Promise.resolve({"top":0,"left":0,"right":m=0,"bottom":w=0,"width":m,"height":w}));case 5:case"end":return v.stop()}var m,w}),_callee)})))},J="nut-safe-area",Z=function SafeArea(d){return _.createElement("div",{"className":O()(J,"".concat(J,"-position-").concat(d.position))})};Z.displayName="NutSafeArea";var tt=Object.assign(Object.assign({},z.C),{"left":"","right":"","titleAlign":"center","back":"","fixed":!1,"safeAreaInsetTop":!1,"placeholder":!1,"zIndex":10}),et=function NavBar(d){var v=Object.assign(Object.assign({},tt),d),m=v.right,E=v.left,z=v.titleAlign,P=v.className,M=v.style,j=v.back,W=v.fixed,R=v.safeAreaInsetTop,B=v.placeholder,N=v.zIndex,$=v.onBackClick,D="nut-navbar",H=Array.isArray(d.children)?d.children:[d.children],G=function styles(){return Object.assign(Object.assign({},M),{"zIndex":N})},X=(0,_.useRef)(null),V=(0,_.useRef)(null),U=(0,_.useRef)(null),K=(0,_.useState)("50%"),Y=(0,S.A)(K,2),J=Y[0],et=Y[1],nt=function getNodeWidth(d){return(0,C.a)(void 0,void 0,void 0,(0,k.A)().mark((function _callee(){var v;return(0,k.A)().wrap((function _callee$(m){for(;;)switch(m.prev=m.next){case 0:if(!d){m.next=5;break}return m.next=3,Q(d);case 3:return v=m.sent,m.abrupt("return",v.width);case 5:return m.abrupt("return",0);case 6:case"end":return m.stop()}}),_callee)})))};(0,_.useEffect)((function(){if("left"!==z){j||E||m||et("100%");!function init(){(0,C.a)(void 0,void 0,void 0,(0,k.A)().mark((function _callee2(){var d,v,m;return(0,k.A)().wrap((function _callee2$(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,nt(null==X?void 0:X.current);case 2:return d=w.sent,w.next=5,nt(null==V?void 0:V.current);case 5:return v=w.sent,w.next=8,nt(null==U?void 0:U.current);case 8:m=w.sent,et((d&&v?m-(d>v?2*d:2*v):m-2*d-2*v).toFixed(2));case 12:case"end":return w.stop()}}),_callee2)})))}()}}),[E,m,j]);var it=function renderWrapper(){return _.createElement(T.Ss,{"className":ot,"style":G(),"ref":U},function renderLeft(){return j||E?_.createElement(T.Ss,{"className":"".concat(D,"-left"),"ref":X},j&&_.createElement(T.Ss,{"className":"".concat(D,"-left-back"),"onClick":function onClick(d){return $(d)}},j),E):null}(),function renderContent(){var d={};if("center"===z){var v="".concat(J).concat(/%$/i.test(J)?"":"px");d={"minWidth":v,"width":v}}return _.createElement(T.Ss,{"className":"".concat(D,"-title"),"style":d},H)}(),function renderRight(){return _.createElement(T.Ss,{"className":"".concat(D,"-right"),"ref":V},m)}())},rt=O()((0,w.A)((0,w.A)({},"".concat(D,"-fixed"),W),"".concat(D,"-title-align-").concat(z),!0)),ot=O()(D,rt,P);return _.createElement(_.Fragment,null,R&&_.createElement(Z,{"position":"top"}),W&&B?_.createElement(T.Ss,{"className":"".concat(D,"-placeholder")},it()):it())};et.displayName="NutNavBar";var nt=m(1221),it=!0,rt="nut-icon",ot="i",at="nutui-iconfont",st={"className":"","style":void 0,"name":"","width":"","height":"","size":"","svg64":"","svgSrc":"","onClick":function onClick(){}},ct=function Icon$1(d){var v=rt,m=(0,nt.A)((0,nt.A)({},st),d),w=m.className,k=m.style,S=m.name,C=m.color,E=m.width,O=m.height,T=m.size,z=m.svg64,P=(m.svgSrc,m.children),M=m.onClick,j=m.fallback,W=void 0===j?!it:j,R=function pxCheck(d){return""===d?"":isNaN(Number(d))?String(d):d+"px"},B={},N=R(E||T||""),$=R(O||T||"");N&&(B.width=N),$&&(B.height=$);var D={"mask":"url('".concat(z,"')  0 0/100% 100% no-repeat"),"WebkitMask":"url('".concat(z,"') 0 0/100% 100% no-repeat")};return _.createElement(ot,{"className":function classes(){var d=W?null==S?void 0:S.toLowerCase():S;return"".concat(W?at:""," ").concat(v," ").concat(v,"-").concat(d," ").concat(w)}(),"style":function getStyle(){return(0,nt.A)((0,nt.A)((0,nt.A)({},k),W?{}:(0,nt.A)({"backgroundColor":C||"currentColor"},D)),B)}(),"onClick":function handleClick(d){M&&M(d)},"color":C},P)},lt=function IconSVG(d){var v=(0,nt.A)((0,nt.A)({},st),d);return _.createElement(_.Fragment,null,_.createElement(ct,(0,nt.A)((0,nt.A)({},v),{},{"name":v.name||"ArrowLeft","svg64":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGZpbGw9IiMxYTFhMWEiIGQ9Ik02NjEuMzMgMTUzLjgxYTEwLjY3IDEwLjY3IDAgMCAwLTE4LjEzLTcuNjhMMjc3LjMzIDUxMiA2NDMuMiA4NzcuODdhMTAuNjcgMTAuNjcgMCAwIDAgMTguMTMtNy42OHYtNjAuMzhhMTAuMDMgMTAuMDMgMCAwIDAtMy4yLTcuNDZMMzY3Ljc5IDUxMmwyOTAuMzQtMjkwLjM1YTEwLjg4IDEwLjg4IDAgMCAwIDMuMi03LjQ2eiIvPjwvc3ZnPg=="})))};function asyncGeneratorStep(d,v,m,w,k,S,C){try{var _=d[S](C),E=_.value}catch(d){return void m(d)}_.done?v(E):Promise.resolve(E).then(w,k)}function _asyncToGenerator(d){return function(){var v=this,m=arguments;return new Promise((function(w,k){var S=d.apply(v,m);function _next(d){asyncGeneratorStep(S,w,k,_next,_throw,"next",d)}function _throw(d){asyncGeneratorStep(S,w,k,_next,_throw,"throw",d)}_next(void 0)}))}}var ut=m(925),ht=m(427),ft=m(2857),dt=m(2282),pt=m.n(dt),gt=function getSystemInfoSync(){var d=function getWindowInfo(){return{"pixelRatio":window.devicePixelRatio,"screenWidth":window.screen.width,"screenHeight":window.screen.height,"windowWidth":document.documentElement.clientWidth,"windowHeight":document.documentElement.clientHeight,"statusBarHeight":NaN,"safeArea":{"bottom":0,"height":0,"left":0,"right":0,"top":0,"width":0}}}(),v=function getSystemSetting(){return{"bluetoothEnabled":!1,"locationEnabled":!1,"wifiEnabled":!1,"deviceOrientation":window.screen.width>=window.screen.height?"landscape":"portrait"}}(),m=function getDeviceInfo(){var d,v;return{"abi":"","deviceAbi":"","benchmarkLevel":-1,"brand":pt().manufacturer||"unknown","model":pt().product||"unknown","system":(null===(d=pt().os)||void 0===d?void 0:d.toString())||"unknown","platform":(null===(v=pt().os)||void 0===v?void 0:v.family)||"unknown","CPUType":""}}(),w=function getAppBaseInfo(){var d,v=!1;return(null===(d=window.matchMedia)||void 0===d?void 0:d.call(window,"(prefers-color-scheme: dark)").matches)&&(v=!0),{"SDKVersion":"","enableDebug":!1,"language":navigator.language,"version":"","theme":v?"dark":"light"}}(),k={"albumAuthorized":"not determined","bluetoothAuthorized":"not determined","cameraAuthorized":"not determined","locationAuthorized":"not determined","locationReducedAccuracy":!1,"microphoneAuthorized":"not determined","notificationAuthorized":"not determined","notificationAlertAuthorized":"not determined","notificationBadgeAuthorized":"not determined","notificationSoundAuthorized":"not determined","phoneCalendarAuthorized":"not determined"};return delete m.abi,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},d),v),m),w),{"fontSizeSetting":NaN,"albumAuthorized":"authorized"===k.albumAuthorized,"cameraAuthorized":"authorized"===k.cameraAuthorized,"locationAuthorized":"authorized"===k.locationAuthorized,"microphoneAuthorized":"authorized"===k.microphoneAuthorized,"notificationAuthorized":"authorized"===k.notificationAuthorized,"notificationAlertAuthorized":"authorized"===k.notificationAlertAuthorized,"notificationBadgeAuthorized":"authorized"===k.notificationBadgeAuthorized,"notificationSoundAuthorized":"authorized"===k.notificationSoundAuthorized,"phoneCalendarAuthorized":"authorized"===k.phoneCalendarAuthorized,"locationReducedAccuracy":k.locationReducedAccuracy,"environment":""})},t=function(d,v){return t=Object.setPrototypeOf||{"__proto__":[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(d[m]=v[m])},t(d,v)};function e(d,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function n(){this.constructor=d}t(d,v),d.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}var i=function(){return i=Object.assign||function(d){for(var v,m=1,w=arguments.length;m<w;m++)for(var k in v=arguments[m])Object.prototype.hasOwnProperty.call(v,k)&&(d[k]=v[k]);return d},i.apply(this,arguments)};function n(d,v,m,w){return new(m||(m=Promise))((function(k,S){function a(d){try{h(w.next(d))}catch(d){S(d)}}function s(d){try{h(w.throw(d))}catch(d){S(d)}}function h(d){var v;d.done?k(d.value):(v=d.value,v instanceof m?v:new m((function(d){d(v)}))).then(a,s)}h((w=w.apply(d,v||[])).next())}))}function r(d,v){var m,w,k,S,C={"label":0,"sent":function(){if(1&k[0])throw k[1];return k[1]},"trys":[],"ops":[]};return S={"next":s(0),"throw":s(1),"return":s(2)},"function"==typeof Symbol&&(S[Symbol.iterator]=function(){return this}),S;function s(S){return function(_){return function(S){if(m)throw new TypeError("Generator is already executing.");for(;C;)try{if(m=1,w&&(k=2&S[0]?w.return:S[0]?w.throw||((k=w.return)&&k.call(w),0):w.next)&&!(k=k.call(w,S[1])).done)return k;switch(w=0,k&&(S=[2&S[0],k.value]),S[0]){case 0:case 1:k=S;break;case 4:return C.label++,{"value":S[1],"done":!1};case 5:C.label++,w=S[1],S=[0];continue;case 7:S=C.ops.pop(),C.trys.pop();continue;default:if(!((k=(k=C.trys).length>0&&k[k.length-1])||6!==S[0]&&2!==S[0])){C=0;continue}if(3===S[0]&&(!k||S[1]>k[0]&&S[1]<k[3])){C.label=S[1];break}if(6===S[0]&&C.label<k[1]){C.label=k[1],k=S;break}if(k&&C.label<k[2]){C.label=k[2],C.ops.push(S);break}k[2]&&C.ops.pop(),C.trys.pop();continue}S=v.call(d,C)}catch(d){S=[6,d],w=0}finally{m=k=0}if(5&S[0])throw S[1];return{"value":S[0]?S[1]:void 0,"done":!0}}([S,_])}}}function o(d,v){for(var m=0,w=v.length,k=d.length;m<w;m++,k++)d[k]=v[m];return d}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{"value":function(d,v){if(null==this)throw new TypeError('"this" is null or not defined');var m=Object(this),w=m.length>>>0;if(0===w)return!1;for(var k,S,C=0|v,_=Math.max(C>=0?C:w-Math.abs(C),0);_<w;){if((k=m[_])===(S=d)||"number"==typeof k&&"number"==typeof S&&isNaN(k)&&isNaN(S))return!0;_++}return!1}}),String.prototype.includes||(String.prototype.includes=function(d,v){return"number"!=typeof v&&(v=0),!(v+d.length>this.length)&&-1!==this.indexOf(d,v)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{"value":function(d){if(null==this)throw new TypeError('"this" is null or not defined');var v=Object(this),m=v.length>>>0;if("function"!=typeof d)throw new TypeError("predicate must be a function");for(var w=arguments[1],k=0;k<m;){var S=v[k];if(d.call(w,S,k,v))return S;k++}}});var a=function(d){for(var v=[],m=1;m<arguments.length;m++)v[m-1]=arguments[m];return v.some((function(v){return Object.prototype.toString.call(d).slice(8,-1).toLowerCase()===v}))},s=function(d,v){return Object.prototype.hasOwnProperty.call(d,v)},h=function(d){return[].filter.call(d,(function(d){return"\n"!==d})).join("")},c=function(d){if("string"!=typeof d)return!1;if("transparent"===(d=d.toLocaleLowerCase().trim()))return!1;var v;if(/^rgba/.test(d)&&0===(null===(v=/([^\s,]+)\)$/.exec(d))?0:"object"==typeof v?NaN:"number"==typeof v?v:"string"==typeof v?"%"===v[v.length-1]?Number(v.slice(0,-1))/100:Number(v):NaN))return!1;return!0},l=function(d,v){var m,w=(null===(m=d.padding)||void 0===m?void 0:m.split(" ").map((function(d){return v(d)})))||[0],k=0,S=0,C=0,_=0;switch(w.length){case 1:k=S=C=_=w[0];break;case 2:k=S=w[0],C=_=w[1];break;case 3:k=w[0],C=_=w[1],S=w[2];break;default:k=w[0],S=w[1],C=w[2],_=w[3]}var E={"paddingTop":k,"paddingBottom":S,"paddingLeft":C,"paddingRight":_};for(var O in E)E[O]=s(d,O)&&a(d[O],"string","number")?v(d[O]):E[O];return[k,S,C,_]},u=function(d){var v=[],m=d.map((function(d){return Number(d)})).reduce((function(d,m){if(m>0){var w=d+m;return v.push(w),w}return v.push(NaN),d}),0),w=Math.random()*m;return v.findIndex((function(d){return w<=d}))},f=function(d,v,m,w){void 0===w&&(w=1/0),w<=0&&(w=1/0);for(var k="",S=[],C=d.measureText("...").width,_=0;_<v.length;_++){k+=v[_];var E=d.measureText(k).width,O=m(S);if(w===S.length+1&&(E+=C),O<0)return S;if(E>O&&(S.push(k.slice(0,-1)),k=v[_]),w===S.length)return S[S.length-1]+="...",S}return k&&S.push(k),S.length||S.push(v),S},vt=function(){function t(){this.subs=[]}return t.prototype.addSub=function(d){this.subs.includes(d)||this.subs.push(d)},t.prototype.notify=function(){this.subs.forEach((function(d){d.update()}))},t}(),mt="__proto__"in{};function g(d,v,m,w){Object.defineProperty(d,v,{"value":m,"enumerable":!!w,"writable":!0,"configurable":!0})}var yt=Array.prototype,bt=Object.create(yt);["push","pop","shift","unshift","sort","splice","reverse"].forEach((function(d){bt[d]=function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];var w=yt[d].apply(this,v),k=this.__luckyOb__;return["push","unshift","splice"].includes(d)&&k.walk(this),k.dep.notify(),w}}));var wt=function(){function t(d){this.dep=new vt,g(d,"__luckyOb__",this),Array.isArray(d)&&(mt?d.__proto__=bt:Object.getOwnPropertyNames(bt).forEach((function(v){g(d,v,bt[v])}))),this.walk(d)}return t.prototype.walk=function(d){Object.keys(d).forEach((function(v){b(d,v,d[v])}))},t}();function y(d){if(d&&"object"==typeof d)return"__luckyOb__"in d?d.__luckyOb__:new wt(d)}function b(d,v,m){var w=new vt,k=Object.getOwnPropertyDescriptor(d,v);if(!k||!1!==k.configurable){var S=k&&k.get,C=k&&k.set;S&&!C||2!==arguments.length||(m=d[v]);var _=y(m);Object.defineProperty(d,v,{"get":function(){var v=S?S.call(d):m;return vt.target&&(w.addSub(vt.target),_&&_.dep.addSub(vt.target)),v},"set":function(v){v!==m&&(m=v,S&&!C||(C?C.call(d,v):m=v,_=y(v),w.notify()))}})}}var xt=0,kt=function(){function t(d,v,m,w){void 0===w&&(w={}),this.id=xt++,this.$lucky=d,this.expr=v,this.deep=!!w.deep,this.getter="function"==typeof v?v:function(d){d+=".";for(var v=[],m="",w=0;w<d.length;w++){var k=d[w];if(/\[|\./.test(k))v.push(m),m="";else{if(/\W/.test(k))continue;m+=k}}return function(d){return v.reduce((function(d,v){return d[v]}),d)}}(v),this.cb=m,this.value=this.get()}return t.prototype.get=function(){vt.target=this;var d=this.getter.call(this.$lucky,this.$lucky);return this.deep&&function(d){var e=function(d){a(d,"array","object")&&Object.keys(d).forEach((function(v){var m=d[v];e(m)}))};e(d)}(d),vt.target=null,d},t.prototype.update=function(){var d=this.get(),v=this.value;this.value=d,this.cb.call(this.$lucky,d,v)},t}(),St=function(){function t(d,v){var m=this;this.version="1.7.26",this.htmlFontSize=16,this.rAF=function(){},this.boxWidth=0,this.boxHeight=0,"string"==typeof d?d={"el":d}:1===d.nodeType&&(d={"el":"","divElement":d}),this.config=d,this.data=v,d.flag||(d.flag="WEB"),d.el&&(d.divElement=document.querySelector(d.el)),d.divElement&&(d.canvasElement=document.createElement("canvas"),d.divElement.appendChild(d.canvasElement)),d.canvasElement&&(d.ctx=d.canvasElement.getContext("2d"),d.canvasElement.setAttribute("package","lucky-canvas@1.7.26"),d.canvasElement.addEventListener("click",(function(d){return m.handleClick(d)}))),this.ctx=d.ctx,this.initWindowFunction(),this.config.ctx||console.error("无法获取到 CanvasContext2D"),window&&"function"==typeof window.addEventListener&&window.addEventListener("resize",function(d,v){void 0===v&&(v=300);var m=null;return function(){for(var w=this,k=[],S=0;S<arguments.length;S++)k[S]=arguments[S];m||(m=setTimeout((function(){d.apply(w,k),clearTimeout(m),m=null}),v))}}((function(){return m.resize()}),300)),window&&"function"==typeof window.MutationObserver&&new window.MutationObserver((function(){m.resize()})).observe(document.documentElement,{"attributes":!0})}return t.prototype.resize=function(){var d,v;null===(v=(d=this.config).beforeResize)||void 0===v||v.call(d),this.setHTMLFontSize(),this.setDpr(),this.resetWidthAndHeight(),this.zoomCanvas()},t.prototype.initLucky=function(){if(this.resize(),!this.boxWidth||!this.boxHeight)return console.error("无法获取到宽度或高度")},t.prototype.handleClick=function(d){},t.prototype.setHTMLFontSize=function(){window&&(this.htmlFontSize=+window.getComputedStyle(document.documentElement).fontSize.slice(0,-2))},t.prototype.clearCanvas=function(){var d=[this.boxWidth,this.boxHeight],v=d[0],m=d[1];this.ctx.clearRect(-v,-m,2*v,2*m)},t.prototype.setDpr=function(){var d=this.config;d.dpr||(window?window.dpr=d.dpr=window.devicePixelRatio||1:d.dpr||console.error(d,"未传入 dpr 可能会导致绘制异常"))},t.prototype.resetWidthAndHeight=function(){var d=this.config,v=this.data,m=0,w=0;d.divElement&&(m=d.divElement.offsetWidth,w=d.divElement.offsetHeight),this.boxWidth=this.getLength(v.width||d.width)||m,this.boxHeight=this.getLength(v.height||d.height)||w,d.divElement&&(d.divElement.style.overflow="hidden",d.divElement.style.width=this.boxWidth+"px",d.divElement.style.height=this.boxHeight+"px")},t.prototype.zoomCanvas=function(){var d=this.config,v=this.ctx,m=d.canvasElement,w=d.dpr,k=[this.boxWidth*w,this.boxHeight*w],S=k[0],C=k[1];m&&(m.width=S,m.height=C,m.style.width=S+"px",m.style.height=C+"px",m.style["transform-origin"]="left top",m.style.transform="scale("+1/w+")",v.scale(w,w))},t.prototype.initWindowFunction=function(){var d=this.config;if(window)return this.rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(d){window.setTimeout(d,1e3/60)},d.setTimeout=window.setTimeout,d.setInterval=window.setInterval,d.clearTimeout=window.clearTimeout,void(d.clearInterval=window.clearInterval);if(d.rAF)this.rAF=d.rAF;else if(d.setTimeout){var v=d.setTimeout;this.rAF=function(d){return v(d,16.7)}}else this.rAF=function(d){return setTimeout(d,16.7)}},t.prototype.isWeb=function(){return["WEB","UNI-H5","TARO-H5"].includes(this.config.flag)},t.prototype.loadImg=function(d,v,m){var w=this;return void 0===m&&(m="$resolve"),new Promise((function(k,S){if(d||S("=> '"+v.src+"' 不能为空或不合法"),"WEB"!==w.config.flag)return v[m]=k,void(v.$reject=S);var C=new Image;C.crossorigin="anonymous",C.onload=function(){return k(C)},C.onerror=function(){return S("=> '"+v.src+"' 图片加载失败")},C.src=d}))},t.prototype.drawImage=function(d,v){for(var m,w,k,S=[],C=2;C<arguments.length;C++)S[C-2]=arguments[C];var _=this.config,E=_.flag,O=_.dpr;if(["WEB","MP-WX"].includes(E))k=v;else{if(!["UNI-H5","UNI-MP","TARO-H5","TARO-MP"].includes(E))return console.error("意料之外的 flag, 该平台尚未兼容!");k=v.path}var T=null===(w=(m=k.canvas||k).getContext)||void 0===w?void 0:w.call(m,"2d");if(T&&!this.isWeb()){S=S.map((function(d){return d*O}));var z=T.getImageData.apply(T,S.slice(0,4));d.putImageData.apply(d,o([z],S.slice(4,6)))}else{8===S.length&&(S=S.map((function(d,v){return v<4?d*O:d})));try{d.drawImage.apply(d,o([k],S))}catch(d){}}},t.prototype.computedWidthAndHeight=function(d,v,m,w){if(!v.width&&!v.height)return[d.width,d.height];if(v.width&&!v.height){var k=this.getLength(v.width,m);return[k,d.height*(k/d.width)]}if(!v.width&&v.height){var S=this.getLength(v.height,w);return[d.width*(S/d.height),S]}return[this.getLength(v.width,m),this.getLength(v.height,w)]},t.prototype.changeUnits=function(d,v){var m=this;void 0===v&&(v=1);var w=this.config;return Number(d.replace(/^([-]*[0-9.]*)([a-z%]*)$/,(function(d,k,S){var C={"%":function(d){return d*(v/100)},"px":function(d){return 1*d},"rem":function(d){return d*m.htmlFontSize},"vw":function(d){return d/100*window.innerWidth}}[S];if(C)return C(k);var _=w.handleCssUnit||w.unitFunc;return _?_(k,S):k})))},t.prototype.getLength=function(d,v){return a(d,"number")?d:a(d,"string")?this.changeUnits(d,v):0},t.prototype.getOffsetX=function(d,v){return void 0===v&&(v=0),(v-d)/2},t.prototype.getOffscreenCanvas=function(d,v){if(!s(this,"_offscreenCanvas")&&(window&&window.document&&"WEB"===this.config.flag?this._offscreenCanvas=document.createElement("canvas"):this._offscreenCanvas=this.config.offscreenCanvas,!this._offscreenCanvas))return console.error("离屏 Canvas 无法渲染!");var m=this.config.dpr,w=this._offscreenCanvas;w.width=(d||300)*m,w.height=(v||150)*m;var k=w.getContext("2d");return k.clearRect(0,0,d,v),k.scale(m,m),k.dpr=m,{"_offscreenCanvas":w,"_ctx":k}},t.prototype.$set=function(d,v,m){d&&"object"==typeof d&&b(d,v,m)},t.prototype.$computed=function(d,v,m){var w=this;Object.defineProperty(d,v,{"get":function(){return m.call(w)}})},t.prototype.$watch=function(d,v,m){void 0===m&&(m={}),"object"==typeof v&&(v=(m=v).handler);var w=new kt(this,d,v,m);return m.immediate&&v.call(this,w.value),function(){}},t.version="1.7.26",t}(),x=function(d){return Math.PI/180*d},I=function(d){for(var v=[],m=1;m<arguments.length;m++)v[m-1]=arguments[m];var w=v[0],k=v[1],S=v[2],C=v[3],_=v[4],E=Math.min(S,C),O=Math.PI;_>E/2&&(_=E/2),d.beginPath(),d.moveTo(w+_,k),d.lineTo(w+_,k),d.lineTo(w+S-_,k),d.arc(w+S-_,k+_,_,-O/2,0),d.lineTo(w+S,k+C-_),d.arc(w+S-_,k+C-_,_,0,O/2),d.lineTo(w+_,k+C),d.arc(w+_,k+C-_,_,O/2,O),d.lineTo(w,k+_),d.arc(w+_,k+_,_,O,-O/2),d.closePath()},A=function(d,v,m,w){return d>=w&&(d=w),m*(d/=w)*d+v},L=function(d,v,m,w){return d>=w&&(d=w),-m*(d/=w)*(d-2)+v},At=function(d){function o(v,m){var w,k=d.call(this,v,{"width":m.width,"height":m.height})||this;return k.blocks=[],k.prizes=[],k.buttons=[],k.defaultConfig={},k.defaultStyle={},k._defaultConfig={},k._defaultStyle={},k.Radius=0,k.prizeRadius=0,k.prizeDeg=0,k.prizeAng=0,k.rotateDeg=0,k.maxBtnRadius=0,k.startTime=0,k.endTime=0,k.stopDeg=0,k.endDeg=0,k.FPS=16.6,k.step=0,k.ImageCache=new Map,k.initData(m),k.initWatch(),k.initComputed(),null===(w=v.beforeCreate)||void 0===w||w.call(k),k.init(),k}return e(o,d),o.prototype.resize=function(){var v,m;d.prototype.resize.call(this),this.Radius=Math.min(this.boxWidth,this.boxHeight)/2,this.ctx.translate(this.Radius,this.Radius),this.draw(),null===(m=(v=this.config).afterResize)||void 0===m||m.call(v)},o.prototype.initLucky=function(){this.Radius=0,this.prizeRadius=0,this.prizeDeg=0,this.prizeAng=0,this.rotateDeg=0,this.maxBtnRadius=0,this.startTime=0,this.endTime=0,this.stopDeg=0,this.endDeg=0,this.FPS=16.6,this.prizeFlag=-1,this.step=0,d.prototype.initLucky.call(this)},o.prototype.initData=function(d){this.$set(this,"width",d.width),this.$set(this,"height",d.height),this.$set(this,"blocks",d.blocks||[]),this.$set(this,"prizes",d.prizes||[]),this.$set(this,"buttons",d.buttons||[]),this.$set(this,"defaultConfig",d.defaultConfig||{}),this.$set(this,"defaultStyle",d.defaultStyle||{}),this.$set(this,"startCallback",d.start),this.$set(this,"endCallback",d.end)},o.prototype.initComputed=function(){var d=this;this.$computed(this,"_defaultConfig",(function(){return i({"gutter":"0px","offsetDegree":0,"speed":20,"speedFunction":"quad","accelerationTime":2500,"decelerationTime":2500,"stopRange":0},d.defaultConfig)})),this.$computed(this,"_defaultStyle",(function(){return i({"fontSize":"18px","fontColor":"#000","fontStyle":"sans-serif","fontWeight":"400","background":"rgba(0,0,0,0)","wordWrap":!0,"lengthLimit":"90%"},d.defaultStyle)}))},o.prototype.initWatch=function(){var d=this;this.$watch("width",(function(v){d.data.width=v,d.resize()})),this.$watch("height",(function(v){d.data.height=v,d.resize()})),this.$watch("blocks",(function(v){d.initImageCache()}),{"deep":!0}),this.$watch("prizes",(function(v){d.initImageCache()}),{"deep":!0}),this.$watch("buttons",(function(v){d.initImageCache()}),{"deep":!0}),this.$watch("defaultConfig",(function(){return d.draw()}),{"deep":!0}),this.$watch("defaultStyle",(function(){return d.draw()}),{"deep":!0}),this.$watch("startCallback",(function(){return d.init()})),this.$watch("endCallback",(function(){return d.init()}))},o.prototype.init=function(){var d,v;return n(this,void 0,void 0,(function(){var m;return r(this,(function(w){switch(w.label){case 0:return this.initLucky(),m=this.config,null===(d=m.beforeInit)||void 0===d||d.call(this),this.draw(),this.draw(),[4,this.initImageCache()];case 1:return w.sent(),null===(v=m.afterInit)||void 0===v||v.call(this),[2]}}))}))},o.prototype.initImageCache=function(){var d=this;return new Promise((function(v){var m={"blocks":d.blocks.map((function(d){return d.imgs})),"prizes":d.prizes.map((function(d){return d.imgs})),"buttons":d.buttons.map((function(d){return d.imgs}))};Object.keys(m).forEach((function(w){var k=m[w],S=[];k&&k.forEach((function(v,m){v&&v.forEach((function(v,k){S.push(d.loadAndCacheImg(w,m,k))}))})),Promise.all(S).then((function(){d.draw(),v()}))}))}))},o.prototype.handleClick=function(d){var v,m=this.ctx;m.beginPath(),m.arc(0,0,this.maxBtnRadius,0,2*Math.PI,!1),m.isPointInPath(d.offsetX,d.offsetY)&&0===this.step&&(null===(v=this.startCallback)||void 0===v||v.call(this,d))},o.prototype.loadAndCacheImg=function(d,v,m){return n(this,void 0,void 0,(function(){var w=this;return r(this,(function(k){return[2,new Promise((function(k,S){var C=w[d][v];if(C&&C.imgs){var _=C.imgs[m];_&&w.loadImg(_.src,_).then((function(d){return n(w,void 0,void 0,(function(){return r(this,(function(v){switch(v.label){case 0:return"function"!=typeof _.formatter?[3,2]:[4,Promise.resolve(_.formatter.call(this,d))];case 1:d=v.sent(),v.label=2;case 2:return this.ImageCache.set(_.src,d),k(),[2]}}))}))})).catch((function(w){console.error(d+"["+v+"].imgs["+m+"] "+w),S()}))}}))]}))}))},o.prototype.drawBlock=function(d,v,m){var w=this,k=this.ctx;c(v.background)&&(k.beginPath(),k.fillStyle=v.background,k.arc(0,0,d,0,2*Math.PI,!1),k.fill()),v.imgs&&v.imgs.forEach((function(v,m){var S=w.ImageCache.get(v.src);if(S){var C=w.computedWidthAndHeight(S,v,2*d,2*d),_=C[0],E=C[1],O=[w.getOffsetX(_)+w.getLength(v.left,2*d),w.getLength(v.top,2*d)-d],T=O[0],z=O[1];k.save(),v.rotate&&k.rotate(x(w.rotateDeg)),w.drawImage(k,S,T,z,_,E),k.restore()}}))},o.prototype.draw=function(){var d,v,m=this,w=this,k=w.config,S=w.ctx,C=w._defaultConfig,_=w._defaultStyle;null===(d=k.beforeDraw)||void 0===d||d.call(this,S),S.clearRect(-this.Radius,-this.Radius,2*this.Radius,2*this.Radius),this.prizeRadius=this.blocks.reduce((function(d,v,w){return m.drawBlock(d,v,w),d-m.getLength(v.padding&&v.padding.split(" ")[0])}),this.Radius),this.prizeDeg=360/this.prizes.length,this.prizeAng=x(this.prizeDeg);var E=this.prizeRadius*Math.sin(this.prizeAng/2)*2,O=x(this.rotateDeg-90+this.prizeDeg/2+C.offsetDegree),p=function(d,v){return m.getOffsetX(S.measureText(v).width)+m.getLength(d.left,E)},g=function(d,v,w){var k=d.lineHeight||_.lineHeight||d.fontSize||_.fontSize;return m.getLength(d.top,v)+(w+1)*m.getLength(k)};S.save(),this.prizes.forEach((function(d,v){var w=O+v*m.prizeAng,k=m.prizeRadius-m.maxBtnRadius,T=d.background||_.background;c(T)&&(S.fillStyle=T,function(d,v,m,w,k,S){d.beginPath();var C,_,E=x(90/Math.PI/m*S),O=w+E,T=k-E;d.arc(0,0,m,O,T,!1),d.lineTo.apply(d,(C=(w+k)/2,_=S/2/Math.abs(Math.sin((w-k)/2)),[+(Math.cos(C)*_).toFixed(8),+(Math.sin(C)*_).toFixed(8)])),d.closePath()}(S,m.maxBtnRadius,m.prizeRadius,w-m.prizeAng/2,w+m.prizeAng/2,m.getLength(C.gutter)),S.fill());var z=Math.cos(w)*m.prizeRadius,P=Math.sin(w)*m.prizeRadius;S.translate(z,P),S.rotate(w+x(90)),d.imgs&&d.imgs.forEach((function(d,v){var w=m.ImageCache.get(d.src);if(w){var C=m.computedWidthAndHeight(w,d,m.prizeAng*m.prizeRadius,k),_=C[0],O=C[1],T=[m.getOffsetX(_)+m.getLength(d.left,E),m.getLength(d.top,k)],z=T[0],P=T[1];m.drawImage(S,w,z,P,_,O)}})),d.fonts&&d.fonts.forEach((function(d){var v=d.fontColor||_.fontColor,w=d.fontWeight||_.fontWeight,E=m.getLength(d.fontSize||_.fontSize),O=d.fontStyle||_.fontStyle,T=s(d,"wordWrap")?d.wordWrap:_.wordWrap,z=d.lengthLimit||_.lengthLimit,P=d.lineClamp||_.lineClamp;S.fillStyle=v,S.font=w+" "+(E|0)+"px "+O;var M=String(d.text);(T?f(S,h(M),(function(v){var w=(m.prizeRadius-g(d,k,v.length))*Math.tan(m.prizeAng/2)*2-m.getLength(C.gutter);return m.getLength(z,w)}),P):M.split("\n")).filter((function(d){return!!d})).forEach((function(v,m){S.fillText(v,p(d,v),g(d,k,m))}))})),S.rotate(x(360)-w-x(90)),S.translate(-z,-P)})),S.restore(),this.buttons.forEach((function(d,v){var w=m.getLength(d.radius,m.prizeRadius);m.maxBtnRadius=Math.max(m.maxBtnRadius,w),c(d.background)&&(S.beginPath(),S.fillStyle=d.background,S.arc(0,0,w,0,2*Math.PI,!1),S.fill()),d.pointer&&c(d.background)&&(S.beginPath(),S.fillStyle=d.background,S.moveTo(-w,0),S.lineTo(w,0),S.lineTo(0,2*-w),S.closePath(),S.fill()),d.imgs&&d.imgs.forEach((function(d,v){var k=m.ImageCache.get(d.src);if(k){var C=m.computedWidthAndHeight(k,d,2*w,2*w),_=C[0],E=C[1],O=[m.getOffsetX(_)+m.getLength(d.left,w),m.getLength(d.top,w)],T=O[0],z=O[1];m.drawImage(S,k,T,z,_,E)}})),d.fonts&&d.fonts.forEach((function(d){var v=d.fontColor||_.fontColor,k=d.fontWeight||_.fontWeight,C=m.getLength(d.fontSize||_.fontSize),E=d.fontStyle||_.fontStyle;S.fillStyle=v,S.font=k+" "+(C|0)+"px "+E,String(d.text).split("\n").forEach((function(v,m){S.fillText(v,p(d,v),g(d,w,m))}))}))})),null===(v=k.afterDraw)||void 0===v||v.call(this,S)},o.prototype.carveOnGunwaleOfAMovingBoat=function(){var d=this,v=d._defaultConfig,m=d.prizeFlag,w=d.prizeDeg,k=d.rotateDeg;this.endTime=Date.now();for(var S=this.stopDeg=k,C=v.speed,_=(Math.random()*w-w/2)*this.getLength(v.stopRange),E=0,O=0,T=0;++E;){var z=360*E-m*w-k-v.offsetDegree+_-w/2,P=L(this.FPS,S,z,v.decelerationTime)-S;if(P>C){this.endDeg=C-O>P-C?z:T;break}T=z,O=P}},o.prototype.play=function(){var d,v;0===this.step&&(this.startTime=Date.now(),this.prizeFlag=void 0,this.step=1,null===(v=(d=this.config).afterStart)||void 0===v||v.call(d),this.run())},o.prototype.stop=function(d){if(0!==this.step&&3!==this.step){if(!d&&0!==d){var v=this.prizes.map((function(d){return d.range}));d=u(v)}d<0?(this.step=0,this.prizeFlag=-1):(this.step=2,this.prizeFlag=d%this.prizes.length)}},o.prototype.run=function(d){var v;void 0===d&&(d=0);var m=this,w=m.rAF,k=m.step,S=m.prizeFlag,C=m._defaultConfig,_=C.accelerationTime,E=C.decelerationTime,O=C.speed;if(0!==k){if(-1!==S){3!==k||this.endDeg||this.carveOnGunwaleOfAMovingBoat();var T=Date.now()-this.startTime,z=Date.now()-this.endTime,P=this.rotateDeg;if(1===k||T<_){this.FPS=T/d;var M=A(T,0,O,_);M===O&&(this.step=2),P+=M%360}else 2===k?(P+=O%360,void 0!==S&&S>=0&&(this.step=3,this.stopDeg=0,this.endDeg=0)):3===k?(P=L(z,this.stopDeg,this.endDeg,E),z>=E&&(this.step=0)):this.stop(-1);this.rotateDeg=P,this.draw(),w(this.run.bind(this,d+1))}}else null===(v=this.endCallback)||void 0===v||v.call(this,this.prizes.find((function(d,v){return v===S}))||{})},o.prototype.conversionAxis=function(d,v){var m=this.config;return[d/m.dpr-this.Radius,v/m.dpr-this.Radius]},o}(St),Ct=function(d){function a(v,m){var w,k=d.call(this,v,{"width":m.width,"height":m.height})||this;return k.rows=3,k.cols=3,k.blocks=[],k.prizes=[],k.buttons=[],k.defaultConfig={},k.defaultStyle={},k.activeStyle={},k._defaultConfig={},k._defaultStyle={},k._activeStyle={},k.cellWidth=0,k.cellHeight=0,k.startTime=0,k.endTime=0,k.currIndex=0,k.stopIndex=0,k.endIndex=0,k.demo=!1,k.timer=0,k.FPS=16.6,k.step=0,k.prizeFlag=-1,k.cells=[],k.ImageCache=new Map,k.initData(m),k.initWatch(),k.initComputed(),null===(w=v.beforeCreate)||void 0===w||w.call(k),k.init(),k}return e(a,d),a.prototype.resize=function(){var v,m;d.prototype.resize.call(this),this.draw(),null===(m=(v=this.config).afterResize)||void 0===m||m.call(v)},a.prototype.initLucky=function(){this.cellWidth=0,this.cellHeight=0,this.startTime=0,this.endTime=0,this.currIndex=0,this.stopIndex=0,this.endIndex=0,this.demo=!1,this.timer=0,this.FPS=16.6,this.prizeFlag=-1,this.step=0,d.prototype.initLucky.call(this)},a.prototype.initData=function(d){this.$set(this,"width",d.width),this.$set(this,"height",d.height),this.$set(this,"rows",Number(d.rows)||3),this.$set(this,"cols",Number(d.cols)||3),this.$set(this,"blocks",d.blocks||[]),this.$set(this,"prizes",d.prizes||[]),this.$set(this,"buttons",d.buttons||[]),this.$set(this,"button",d.button),this.$set(this,"defaultConfig",d.defaultConfig||{}),this.$set(this,"defaultStyle",d.defaultStyle||{}),this.$set(this,"activeStyle",d.activeStyle||{}),this.$set(this,"startCallback",d.start),this.$set(this,"endCallback",d.end)},a.prototype.initComputed=function(){var d=this;this.$computed(this,"_defaultConfig",(function(){var v=i({"gutter":5,"speed":20,"accelerationTime":2500,"decelerationTime":2500},d.defaultConfig);return v.gutter=d.getLength(v.gutter),v.speed=v.speed/40,v})),this.$computed(this,"_defaultStyle",(function(){return i({"borderRadius":20,"fontColor":"#000","fontSize":"18px","fontStyle":"sans-serif","fontWeight":"400","background":"rgba(0,0,0,0)","shadow":"","wordWrap":!0,"lengthLimit":"90%"},d.defaultStyle)})),this.$computed(this,"_activeStyle",(function(){return i({"background":"#ffce98","shadow":""},d.activeStyle)}))},a.prototype.initWatch=function(){var d=this;this.$watch("width",(function(v){d.data.width=v,d.resize()})),this.$watch("height",(function(v){d.data.height=v,d.resize()})),this.$watch("blocks",(function(v){d.initImageCache()}),{"deep":!0}),this.$watch("prizes",(function(v){d.initImageCache()}),{"deep":!0}),this.$watch("buttons",(function(v){d.initImageCache()}),{"deep":!0}),this.$watch("rows",(function(){return d.init()})),this.$watch("cols",(function(){return d.init()})),this.$watch("defaultConfig",(function(){return d.draw()}),{"deep":!0}),this.$watch("defaultStyle",(function(){return d.draw()}),{"deep":!0}),this.$watch("activeStyle",(function(){return d.draw()}),{"deep":!0}),this.$watch("startCallback",(function(){return d.init()})),this.$watch("endCallback",(function(){return d.init()}))},a.prototype.init=function(){var d,v;return n(this,void 0,void 0,(function(){var m;return r(this,(function(w){switch(w.label){case 0:return this.initLucky(),m=this.config,null===(d=m.beforeInit)||void 0===d||d.call(this),this.draw(),[4,this.initImageCache()];case 1:return w.sent(),null===(v=m.afterInit)||void 0===v||v.call(this),[2]}}))}))},a.prototype.initImageCache=function(){var d=this;return new Promise((function(v){var m=d.buttons.map((function(d){return d.imgs}));d.button&&m.push(d.button.imgs);var w={"blocks":d.blocks.map((function(d){return d.imgs})),"prizes":d.prizes.map((function(d){return d.imgs})),"buttons":m};Object.keys(w).forEach((function(m){var k=w[m],S=[];k&&k.forEach((function(v,w){v&&v.forEach((function(v,k){S.push(d.loadAndCacheImg(m,w,k))}))})),Promise.all(S).then((function(){d.draw(),v()}))}))}))},a.prototype.handleClick=function(d){var v=this,m=this.ctx;o(o([],this.buttons),[this.button]).forEach((function(w){var k;if(w){var S=v.getGeometricProperty([w.x,w.y,w.col||1,w.row||1]),C=S[0],_=S[1],E=S[2],O=S[3];m.beginPath(),m.rect(C,_,E,O),m.isPointInPath(d.offsetX,d.offsetY)&&0===v.step&&("function"==typeof w.callback&&w.callback.call(v,w),null===(k=v.startCallback)||void 0===k||k.call(v,d,w))}}))},a.prototype.loadAndCacheImg=function(d,v,m){return n(this,void 0,void 0,(function(){var w=this;return r(this,(function(k){return[2,new Promise((function(k,S){var C=w[d][v];if("buttons"===d&&!w.buttons.length&&w.button&&(C=w.button),C&&C.imgs){var _=C.imgs[m];if(_){var E=[w.loadImg(_.src,_),_.activeSrc&&w.loadImg(_.activeSrc,_,"$activeResolve")];Promise.all(E).then((function(d){var v=d[0],m=d[1];return n(w,void 0,void 0,(function(){var d;return r(this,(function(w){switch(w.label){case 0:return"function"!=typeof(d=_.formatter)?[3,3]:[4,Promise.resolve(d.call(this,v))];case 1:return v=w.sent(),m?[4,Promise.resolve(d.call(this,m))]:[3,3];case 2:m=w.sent(),w.label=3;case 3:return this.ImageCache.set(_.src,v),m&&this.ImageCache.set(_.activeSrc,m),k(),[2]}}))}))})).catch((function(w){console.error(d+"["+v+"].imgs["+m+"] "+w),S()}))}}}))]}))}))},a.prototype.draw=function(){var d,v,m=this,w=this,k=w.config,S=w.ctx,C=w._defaultConfig,_=w._defaultStyle,E=w._activeStyle;null===(d=k.beforeDraw)||void 0===d||d.call(this,S),S.clearRect(0,0,this.boxWidth,this.boxHeight),this.cells=o(o([],this.prizes),this.buttons),this.button&&this.cells.push(this.button),this.cells.forEach((function(d){d.col=d.col||1,d.row=d.row||1})),this.prizeArea=this.blocks.reduce((function(d,v,w){var k=d.x,C=d.y,_=d.w,E=d.h,O=l(v,m.getLength.bind(m)),T=O[0],z=O[1],P=O[2],M=O[3],j=v.borderRadius?m.getLength(v.borderRadius):0,W=v.background;return c(W)&&(S.fillStyle=m.handleBackground(k,C,_,E,W),I(S,k,C,_,E,j),S.fill()),v.imgs&&v.imgs.forEach((function(d,v){var w=m.ImageCache.get(d.src);if(w){var O=m.computedWidthAndHeight(w,d,_,E),T=O[0],z=O[1],P=[m.getOffsetX(T,_)+m.getLength(d.left,_),m.getLength(d.top,E)],M=P[0],j=P[1];m.drawImage(S,w,k+M,C+j,T,z)}})),{"x":k+P,"y":C+T,"w":_-P-M,"h":E-T-z}}),{"x":0,"y":0,"w":this.boxWidth,"h":this.boxHeight}),this.cellWidth=(this.prizeArea.w-C.gutter*(this.cols-1))/this.cols,this.cellHeight=(this.prizeArea.h-C.gutter*(this.rows-1))/this.rows,this.cells.forEach((function(d,v){var w=m.getGeometricProperty([d.x,d.y,d.col,d.row]),C=w[0],O=w[1],T=w[2],z=w[3],P=!1;(void 0===m.prizeFlag||m.prizeFlag>-1)&&(P=v===(m.currIndex%m.prizes.length|0));var M=P?E.background:d.background||_.background;if(c(M)){var j=(P?E.shadow:d.shadow||_.shadow).replace(/px/g,"").split(",")[0].split(" ").map((function(d,v){return v<3?Number(d):d}));4===j.length&&(S.shadowColor=j[3],S.shadowOffsetX=j[0]*k.dpr,S.shadowOffsetY=j[1]*k.dpr,S.shadowBlur=j[2],j[0]>0?T-=j[0]:(T+=j[0],C-=j[0]),j[1]>0?z-=j[1]:(z+=j[1],O-=j[1])),S.fillStyle=m.handleBackground(C,O,T,z,M);var W=m.getLength(d.borderRadius?d.borderRadius:_.borderRadius);I(S,C,O,T,z,W),S.fill(),S.shadowColor="rgba(0, 0, 0, 0)",S.shadowOffsetX=0,S.shadowOffsetY=0,S.shadowBlur=0}v>=m.prizes.length&&(v-=m.prizes.length),d.imgs&&d.imgs.forEach((function(d,v){var w=m.ImageCache.get(d.src),k=m.ImageCache.get(d.activeSrc);if(w){var _=P&&k||w;if(_){var E=m.computedWidthAndHeight(_,d,T,z),M=E[0],j=E[1],W=[C+m.getOffsetX(M,T)+m.getLength(d.left,T),O+m.getLength(d.top,z)],R=W[0],B=W[1];m.drawImage(S,_,R,B,M,j)}}})),d.fonts&&d.fonts.forEach((function(d){var v=P&&E.fontStyle?E.fontStyle:d.fontStyle||_.fontStyle,w=P&&E.fontWeight?E.fontWeight:d.fontWeight||_.fontWeight,k=P&&E.fontSize?m.getLength(E.fontSize):m.getLength(d.fontSize||_.fontSize),M=P&&E.lineHeight?E.lineHeight:d.lineHeight||_.lineHeight||d.fontSize||_.fontSize,j=s(d,"wordWrap")?d.wordWrap:_.wordWrap,W=d.lengthLimit||_.lengthLimit,R=d.lineClamp||_.lineClamp;S.font=w+" "+(k|0)+"px "+v,S.fillStyle=P&&E.fontColor?E.fontColor:d.fontColor||_.fontColor;var B=[],N=String(d.text);if(j){var $=m.getLength(W,T);B=f(S,h(N),(function(){return $}),R)}else B=N.split("\n");B.forEach((function(v,w){S.fillText(v,C+m.getOffsetX(S.measureText(v).width,T)+m.getLength(d.left,T),O+m.getLength(d.top,z)+(w+1)*m.getLength(M))}))}))})),null===(v=k.afterDraw)||void 0===v||v.call(this,S)},a.prototype.handleBackground=function(d,v,m,w,k){var S=this.ctx;return k.includes("linear-gradient")&&(k=function(d,v,m,w,k,S){var C=/linear-gradient\((.+)\)/.exec(S)[1].split(",").map((function(d){return d.trim()})),_=C.shift(),E=[0,0,0,0];if(_.includes("deg")){var c=function(d){return Math.tan(d/180*Math.PI)};(_=_.slice(0,-3)%360)>=0&&_<45?E=[v,m+k,v+w,m+k-w*c(_-0)]:_>=45&&_<90?E=[v,m+k,v+w-k*c(_-45),m]:_>=90&&_<135?E=[v+w,m+k,v+w-k*c(_-90),m]:_>=135&&_<180?E=[v+w,m+k,v,m+w*c(_-135)]:_>=180&&_<225?E=[v+w,m,v,m+w*c(_-180)]:_>=225&&_<270?E=[v+w,m,v+k*c(_-225),m+k]:_>=270&&_<315?E=[v,m,v+k*c(_-270),m+k]:_>=315&&_<360&&(E=[v,m,v+w,m+k-w*c(_-315)])}else _.includes("top")?E=[v,m+k,v,m]:_.includes("bottom")?E=[v,m,v,m+k]:_.includes("left")?E=[v+w,m,v,m]:_.includes("right")&&(E=[v,m,v+w,m]);var O=d.createLinearGradient.apply(d,E.map((function(d){return d|0})));return C.reduce((function(d,v,m){var w=v.split(" ");return 1===w.length?d.addColorStop(m,w[0]):2===w.length&&d.addColorStop.apply(d,w),d}),O)}(S,d,v,m,w,k)),k},a.prototype.carveOnGunwaleOfAMovingBoat=function(){var d=this,v=d._defaultConfig,m=d.prizeFlag,w=d.currIndex;this.endTime=Date.now();for(var k=this.stopIndex=w,S=v.speed,C=0,_=0,E=0;++C;){var O=this.prizes.length*C+m-k,T=L(this.FPS,k,O,v.decelerationTime)-k;if(T>S){this.endIndex=S-_>T-S?O:E;break}E=O,_=T}},a.prototype.play=function(){var d,v;0===this.step&&(this.startTime=Date.now(),this.prizeFlag=void 0,this.step=1,null===(v=(d=this.config).afterStart)||void 0===v||v.call(d),this.run())},a.prototype.stop=function(d){if(0!==this.step&&3!==this.step){if(!d&&0!==d){var v=this.prizes.map((function(d){return d.range}));d=u(v)}d<0?(this.step=0,this.prizeFlag=-1):(this.step=2,this.prizeFlag=d%this.prizes.length)}},a.prototype.run=function(d){var v;void 0===d&&(d=0);var m=this,w=m.rAF,k=m.step,S=m.prizes,C=m.prizeFlag,_=m._defaultConfig,E=_.accelerationTime,O=_.decelerationTime,T=_.speed;if(0!==k){if(-1!==C){3!==k||this.endIndex||this.carveOnGunwaleOfAMovingBoat();var z=Date.now()-this.startTime,P=Date.now()-this.endTime,M=this.currIndex;if(1===k||z<E){this.FPS=z/d;var j=A(z,.1,T-.1,E);j===T&&(this.step=2),M+=j%S.length}else 2===k?(M+=T%S.length,void 0!==C&&C>=0&&(this.step=3,this.stopIndex=0,this.endIndex=0)):3===k?(M=L(P,this.stopIndex,this.endIndex,O),P>=O&&(this.step=0)):this.stop(-1);this.currIndex=M,this.draw(),w(this.run.bind(this,d+1))}}else null===(v=this.endCallback)||void 0===v||v.call(this,this.prizes.find((function(d,v){return v===C}))||{})},a.prototype.getGeometricProperty=function(d){var v=d[0],m=d[1],w=d[2],k=void 0===w?1:w,S=d[3],C=void 0===S?1:S,_=this.cellWidth,E=this.cellHeight,O=this._defaultConfig.gutter,T=[this.prizeArea.x+(_+O)*v,this.prizeArea.y+(E+O)*m];return k&&C&&T.push(_*k+O*(k-1),E*C+O*(C-1)),T},a.prototype.conversionAxis=function(d,v){var m=this.config;return[d/m.dpr,v/m.dpr]},a}(St),_t=function(d){function o(v,m){var w,k=d.call(this,v,{"width":m.width,"height":m.height})||this;return k.blocks=[],k.prizes=[],k.slots=[],k.defaultConfig={},k._defaultConfig={},k.defaultStyle={},k._defaultStyle={},k.endCallback=function(){},k.cellWidth=0,k.cellHeight=0,k.cellAndSpacing=0,k.widthAndSpacing=0,k.heightAndSpacing=0,k.FPS=16.6,k.scroll=[],k.stopScroll=[],k.endScroll=[],k.startTime=0,k.endTime=0,k.step=0,k.prizeFlag=void 0,k.ImageCache=new Map,k.initData(m),k.initWatch(),k.initComputed(),null===(w=v.beforeCreate)||void 0===w||w.call(k),k.init(),k}return e(o,d),o.prototype.resize=function(){var v,m;d.prototype.resize.call(this),this.draw(),null===(m=(v=this.config).afterResize)||void 0===m||m.call(v)},o.prototype.initLucky=function(){this.cellWidth=0,this.cellHeight=0,this.cellAndSpacing=0,this.widthAndSpacing=0,this.heightAndSpacing=0,this.FPS=16.6,this.scroll=[],this.stopScroll=[],this.endScroll=[],this.startTime=0,this.endTime=0,this.prizeFlag=void 0,this.step=0,d.prototype.initLucky.call(this)},o.prototype.initData=function(d){this.$set(this,"width",d.width),this.$set(this,"height",d.height),this.$set(this,"blocks",d.blocks||[]),this.$set(this,"prizes",d.prizes||[]),this.$set(this,"slots",d.slots||[]),this.$set(this,"defaultConfig",d.defaultConfig||{}),this.$set(this,"defaultStyle",d.defaultStyle||{}),this.$set(this,"endCallback",d.end)},o.prototype.initComputed=function(){var d=this;this.$computed(this,"_defaultConfig",(function(){var v=i({"mode":"vertical","rowSpacing":0,"colSpacing":5,"speed":20,"direction":1,"accelerationTime":2500,"decelerationTime":2500},d.defaultConfig);return v.rowSpacing=d.getLength(v.rowSpacing),v.colSpacing=d.getLength(v.colSpacing),v})),this.$computed(this,"_defaultStyle",(function(){return i({"borderRadius":0,"fontColor":"#000","fontSize":"18px","fontStyle":"sans-serif","fontWeight":"400","background":"rgba(0,0,0,0)","wordWrap":!0,"lengthLimit":"90%"},d.defaultStyle)}))},o.prototype.initWatch=function(){var d=this;this.$watch("width",(function(v){d.data.width=v,d.resize()})),this.$watch("height",(function(v){d.data.height=v,d.resize()})),this.$watch("blocks",(function(v){d.initImageCache()}),{"deep":!0}),this.$watch("prizes",(function(v){d.initImageCache()}),{"deep":!0}),this.$watch("slots",(function(v){d.drawOffscreenCanvas(),d.draw()}),{"deep":!0}),this.$watch("defaultConfig",(function(){return d.draw()}),{"deep":!0}),this.$watch("defaultStyle",(function(){return d.draw()}),{"deep":!0}),this.$watch("endCallback",(function(){return d.init()}))},o.prototype.init=function(){var d,v;return n(this,void 0,void 0,(function(){var m;return r(this,(function(w){switch(w.label){case 0:return this.initLucky(),m=this.config,null===(d=m.beforeInit)||void 0===d||d.call(this),this.drawOffscreenCanvas(),this.draw(),[4,this.initImageCache()];case 1:return w.sent(),null===(v=m.afterInit)||void 0===v||v.call(this),[2]}}))}))},o.prototype.initImageCache=function(){var d=this;return new Promise((function(v){var m={"blocks":d.blocks.map((function(d){return d.imgs})),"prizes":d.prizes.map((function(d){return d.imgs}))};Object.keys(m).forEach((function(w){var k=m[w],S=[];k&&k.forEach((function(v,m){v&&v.forEach((function(v,k){S.push(d.loadAndCacheImg(w,m,k))}))})),Promise.all(S).then((function(){d.drawOffscreenCanvas(),d.draw(),v()}))}))}))},o.prototype.loadAndCacheImg=function(d,v,m){return n(this,void 0,void 0,(function(){var w=this;return r(this,(function(k){return[2,new Promise((function(k,S){var C=w[d][v];if(C&&C.imgs){var _=C.imgs[m];_&&w.loadImg(_.src,_).then((function(d){return n(w,void 0,void 0,(function(){return r(this,(function(v){switch(v.label){case 0:return"function"!=typeof _.formatter?[3,2]:[4,Promise.resolve(_.formatter.call(this,d))];case 1:d=v.sent(),v.label=2;case 2:return this.ImageCache.set(_.src,d),k(),[2]}}))}))})).catch((function(w){console.error(d+"["+v+"].imgs["+m+"] "+w),S()}))}}))]}))}))},o.prototype.drawOffscreenCanvas=function(){var d=this,v=this._defaultConfig,m=this._defaultStyle,w=this.drawBlocks(),k=w.w,S=w.h,C=this.prizes.length,_=this.displacementWidthOrHeight(),E=_.cellWidth,O=_.cellHeight,T=_.widthAndSpacing,z=_.heightAndSpacing,P=new Array(C).fill(void 0).map((function(d,v){return v})),M=0,j=0;this.slots.forEach((function(v,m){void 0===d.scroll[m]&&(d.scroll[m]=0),v.order=v.order||P;var w=v.order.length;M=Math.max(M,k+T*w),j=Math.max(j,S+z*w)}));var W=this.getOffscreenCanvas(M,j),R=W._offscreenCanvas,B=W._ctx;this._offscreenCanvas=R,this.slots.forEach((function(w,k){var S=E*k,C=O*k,_=0,P=function(d,v){for(var m={},w=[],k=0;k<d.length;k++)m[k]=d[k];for(k=0;k<v.length;k++){var S=m[v[k]];S&&(w[k]=S)}return w}(d.prizes,w.order);if(P.length){P.forEach((function(k,P){if(k){w.order[P];var M=T*P+v.colSpacing/2,j=z*P+v.rowSpacing/2,W=d.displacement([S,j,z],[M,C,T]),R=W[0],N=W[1],$=W[2];_+=$;var D=k.background||m.background;if(c(D)){var H=d.getLength(s(k,"borderRadius")?k.borderRadius:m.borderRadius);I(B,R,N,E,E,H),B.fillStyle=D,B.fill()}k.imgs&&k.imgs.forEach((function(v,m){var w=d.ImageCache.get(v.src);if(w){var k=d.computedWidthAndHeight(w,v,E,O),S=k[0],C=k[1],_=[R+d.getOffsetX(S,E)+d.getLength(v.left,E),N+d.getLength(v.top,O)],T=_[0],z=_[1];d.drawImage(B,w,T,z,S,C)}})),k.fonts&&k.fonts.forEach((function(v){var w=v.fontStyle||m.fontStyle,k=v.fontWeight||m.fontWeight,S=d.getLength(v.fontSize||m.fontSize),C=v.lineHeight||m.lineHeight||v.fontSize||m.fontSize,_=s(v,"wordWrap")?v.wordWrap:m.wordWrap,T=v.lengthLimit||m.lengthLimit,z=v.lineClamp||m.lineClamp;B.font=k+" "+(S|0)+"px "+w,B.fillStyle=v.fontColor||m.fontColor;var P=[],M=String(v.text);if(_){var j=d.getLength(T,E);P=f(B,h(M),(function(){return j}),z)}else P=M.split("\n");P.forEach((function(m,w){B.fillText(m,R+d.getOffsetX(B.measureText(m).width,E)+d.getLength(v.left,E),N+d.getLength(v.top,O)+(w+1)*d.getLength(C))}))}))}}));for(var M=d.displacement([S,0,E,_],[0,C,_,O]),W=M[0],N=M[1],$=M[2],D=M[3],H=_;H<j+_;){var G=d.displacement([W,H],[H,N]),X=G[0],V=G[1];d.drawImage(B,R,W,N,$,D,X,V,$,D),H+=_}}}))},o.prototype.drawBlocks=function(){var d=this,v=this;v.config;var m=v.ctx;v._defaultConfig;var w=v._defaultStyle;return this.prizeArea=this.blocks.reduce((function(v,k,S){var C=v.x,_=v.y,E=v.w,O=v.h,T=l(k,d.getLength.bind(d)),z=T[0],P=T[1],M=T[2],j=T[3],W=k.borderRadius?d.getLength(k.borderRadius):0,R=k.background||w.background;return c(R)&&(I(m,C,_,E,O,W),m.fillStyle=R,m.fill()),k.imgs&&k.imgs.forEach((function(v,w){var k=d.ImageCache.get(v.src);if(k){var S=d.computedWidthAndHeight(k,v,E,O),T=S[0],z=S[1],P=[d.getOffsetX(T,E)+d.getLength(v.left,E),d.getLength(v.top,O)],M=P[0],j=P[1];d.drawImage(m,k,C+M,_+j,T,z)}})),{"x":C+M,"y":_+z,"w":E-M-j,"h":O-z-P}}),{"x":0,"y":0,"w":this.boxWidth,"h":this.boxHeight})},o.prototype.draw=function(){var d,v=this,m=this,w=m.config,k=m.ctx;m._defaultConfig,m._defaultStyle,null===(d=w.beforeDraw)||void 0===d||d.call(this,k),k.clearRect(0,0,this.boxWidth,this.boxHeight);var S=this.drawBlocks(),C=S.x,_=S.y,E=S.w,O=S.h;if(this._offscreenCanvas){var T=this,z=T.cellWidth,P=T.cellHeight,M=T.cellAndSpacing,j=T.widthAndSpacing,W=T.heightAndSpacing;this.slots.forEach((function(d,m){var w=M*d.order.length,S=v.displacement(-(O-W)/2,-(E-j)/2),T=v.scroll[m]+S;T<0&&(T=T%w+w),T>w&&(T%=w);var R=v.displacement([z*m,T,z,O],[T,P*m,E,P]),B=R[0],N=R[1],$=R[2],D=R[3],H=v.displacement([C+j*m,_,z,O],[C,_+W*m,E,P]),G=H[0],X=H[1],V=H[2],U=H[3];v.drawImage(k,v._offscreenCanvas,B,N,$,D,G,X,V,U)}))}},o.prototype.carveOnGunwaleOfAMovingBoat=function(){var d=this,v=this,m=v._defaultConfig,w=v.prizeFlag,k=v.cellAndSpacing;this.endTime=Date.now(),this.slots.forEach((function(v,S){var C=v.order;if(C.length)for(var _=v.speed||m.speed,E=v.direction||m.direction,O=C.findIndex((function(d){return d===w[S]})),T=k*C.length,z=d.stopScroll[S]=d.scroll[S],P=0;++P;){var M=k*O+T*P*E-z,j=L(d.FPS,z,M,m.decelerationTime)-z;if(Math.abs(j)>_){d.endScroll[S]=M;break}}}))},o.prototype.play=function(){var d,v;0===this.step&&(this.startTime=Date.now(),this.prizeFlag=void 0,this.step=1,null===(v=(d=this.config).afterStart)||void 0===v||v.call(d),this.run())},o.prototype.stop=function(d){var v;if(0!==this.step&&3!==this.step){if("number"==typeof d)this.prizeFlag=new Array(this.slots.length).fill(d);else{if(!a(d,"array"))return this.stop(-1),console.error("stop() 无法识别的参数类型 "+typeof d);if(d.length!==this.slots.length)return this.stop(-1),console.error("stop(["+d+"]) 参数长度的不正确");this.prizeFlag=d}(null===(v=this.prizeFlag)||void 0===v?void 0:v.includes(-1))?(this.prizeFlag=[],this.step=0):this.step=2}},o.prototype.run=function(d){var v,m,w=this;void 0===d&&(d=0);var k=this,S=k.rAF,C=k.step,_=k.prizeFlag,E=k._defaultConfig,O=k.cellAndSpacing,T=k.slots,z=E.accelerationTime,P=E.decelerationTime;if(0!==this.step||(null==_?void 0:_.length)!==T.length){if(void 0===_||_.length){3!==this.step||this.endScroll.length||this.carveOnGunwaleOfAMovingBoat();var M=Date.now()-this.startTime,j=Date.now()-this.endTime;T.forEach((function(v,m){var k=v.order;if(k&&k.length){var S=O*k.length,W=Math.abs(v.speed||E.speed),R=v.direction||E.direction,B=0,N=w.scroll[m];if(1===C||M<z){w.FPS=M/d;var $=A(M,0,W,z);$===W&&(w.step=2),B=(N+$*R)%S}else if(2===C)B=(N+W*R)%S,(null==_?void 0:_.length)===T.length&&(w.step=3,w.stopScroll=[],w.endScroll=[]);else if(3===C&&j){var D=w.stopScroll[m],H=w.endScroll[m];B=L(j,D,H,P),j>=P&&(w.step=0)}w.scroll[m]=B}})),this.draw(),S(this.run.bind(this,d+1))}}else{for(var W=_[0],R=0;R<T.length;R++){var B=T[R],N=_[R];if(!(null===(v=B.order)||void 0===v?void 0:v.includes(N))||W!==N){W=-1;break}}null===(m=this.endCallback)||void 0===m||m.call(this,this.prizes.find((function(d,v){return v===W}))||void 0)}},o.prototype.displacement=function(d,v){return"horizontal"===this._defaultConfig.mode?v:d},o.prototype.displacementWidthOrHeight=function(){var d=this._defaultConfig.mode,v=this.slots.length,m=this._defaultConfig,w=m.colSpacing,k=m.rowSpacing,S=this.prizeArea||this.drawBlocks();S.x,S.y;var C,_,E=S.w,O=S.h,T=0,z=0;return"horizontal"===d?(z=this.cellHeight=(O-k*(v-1))/v,T=this.cellWidth=z):(T=this.cellWidth=(E-w*(v-1))/v,z=this.cellHeight=T),C=this.widthAndSpacing=this.cellWidth+w,_=this.heightAndSpacing=this.cellHeight+k,this.cellAndSpacing="horizontal"===d?C:_,{"cellWidth":T,"cellHeight":z,"widthAndSpacing":C,"heightAndSpacing":_}},o}(St),Et=m(6767),Ot=gt().windowWidth,Tt=function changeUnits(d){return d=String(d),Number(d.replace(/^(\-*[0-9.]*)([a-z%]*)$/,(function(d,v,m){switch(m){case"px":default:v*=1;break;case"rpx":v=function rpx2px(d){return"string"==typeof d&&(d=Number(d.replace(/[a-z]*/g,""))),Ot/750*d}(v)}return v})))},zt=function(){var d=_asyncToGenerator((0,k.A)().mark((function _callee(d,v){var m,w,S,C,_=arguments;return(0,k.A)().wrap((function _callee$(k){for(;;)switch(k.prev=k.next){case 0:m=_.length>2&&void 0!==_[2]?_[2]:"src",w=_.length>3&&void 0!==_[3]?_[3]:"$resolve",S=_.length>4?_[4]:void 0,(C=v.createImage()).onload=function(){"function"==typeof S&&S(),d[w](C)},C.onerror=function(d){console.error(d)},C.src=d[m];case 7:case"end":return k.stop()}}),_callee)})));return function resolveImage(v,m){return d.apply(this,arguments)}}();function utils_getImage(d,v){var m=this;return new Promise((function(w,k){!function canvasToTempFilePath(d,v){var m=d.canvasId,w=d.fileType,k=d.quality,S=d.success,C=d.fail,_=d.complete,E=new Et._({"name":"canvasToTempFilePath","success":S,"fail":C,"complete":_}),O=(0,R.wI)(v),T=null==O?void 0:O.querySelector('canvas[canvas-id="'.concat(m,'"]'));try{var z=null==T?void 0:T.toDataURL("image/".concat(("jpg"===w?"jpeg":w)||"png"),k);return E.success({"tempFilePath":z})}catch(d){return E.fail({"errMsg":d.message})}}({"canvas":v,"canvasId":d,"success":function success(d){return w(d)},"fail":function fail(d){return k(d)}},m)}))}var It=m(6070),Lt=function(d){function LuckyWheel(d){var v;return(0,P.A)(this,LuckyWheel),v=(0,ut.A)(this,LuckyWheel,[d]),(0,w.A)(v,"flag","WEB"),(0,w.A)(v,"ctx",null),(0,w.A)(v,"canvas",null),(0,w.A)(v,"state",{"imgSrc":"","myLucky":null,"boxWidth":300,"boxHeight":300,"btnWidth":0,"btnHeight":0}),v}return(0,ht.A)(LuckyWheel,d),(0,M.A)(LuckyWheel,[{"key":"componentDidMount","value":function componentDidMount(){this.initLucky()}},{"key":"componentDidUpdate","value":function componentDidUpdate(d){var v=this.props,m=this.state;m.myLucky&&(v.blocks!==d.blocks&&(m.myLucky.blocks=v.blocks),v.prizes!==d.prizes&&(m.myLucky.prizes=v.prizes),v.buttons!==d.buttons&&(m.myLucky.buttons=v.buttons))}},{"key":"imgBindload","value":(v=_asyncToGenerator((0,k.A)().mark((function _callee(d,v,m,w){var S;return(0,k.A)().wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:S=this.props[v][m].imgs[w],zt(S,this.canvas);case 2:case"end":return d.stop()}}),_callee,this)}))),function imgBindload(d,m,w,k){return v.apply(this,arguments)})},{"key":"getImage","value":function getImage(){var d=(0,ft.nI)().page;return utils_getImage.call(d,this.props.canvasId,this.canvas)}},{"key":"showCanvas","value":function showCanvas(){this.setState({"imgSrc":""})}},{"key":"hideCanvas","value":function hideCanvas(){var d=this;"WEB"!==this.flag&&this.getImage().then((function(v){if("canvasToTempFilePath:ok"!==v.errMsg)return console.error(v);d.setState({"imgSrc":v.tempFilePath})}))}},{"key":"initLucky","value":function initLucky(){var d=this,v=this.props;this.setState({"boxWidth":Tt(v.width),"boxHeight":Tt(v.height)},(function(){setTimeout((function(){d.getConfig()}),100)}))}},{"key":"getConfig","value":function getConfig(){var d=this,v=this.flag,m=this.dpr=gt().pixelRatio;if("WEB"===v){var w=document.querySelector("#".concat(this.props.canvasId));this.drawLucky({"dpr":m,"flag":v,"divElement":w,"width":this.state.boxWidth,"height":this.state.boxHeight,"rAF":requestAnimationFrame})}else{var k=(0,ft.nI)().page;X().in(k).select("#".concat(this.props.canvasId)).fields({"node":!0,"size":!0}).exec((function(w){if(!w[0]||!w[0].node)return console.error("lucky-canvas 获取不到 canvas 标签");var k=w[0],S=k.node,C=k.width,_=k.height,E=d.canvas=S,O=d.ctx=E.getContext("2d");E.width=C*m,E.height=_*m,O.scale(m,m),d.drawLucky({"dpr":m,"flag":v,"ctx":O,"width":C,"height":_})}))}}},{"key":"drawLucky","value":function drawLucky(d){var v=this,m=this,w=this.props,k=this.flag,S=this.ctx,C=new At((0,nt.A)((0,nt.A)({},d),{},{"setTimeout":setTimeout,"clearTimeout":clearTimeout,"setInterval":setInterval,"clearInterval":clearInterval,"unitFunc":function unitFunc(d,v){return Tt(d+v)},"beforeCreate":function beforeCreate(){if("WEB"!==k){var d=Math.min(this.config.width,this.config.height)/2;S.translate(d,d)}},"beforeInit":function beforeInit(){"WEB"!==k&&S.translate(-this.Radius,-this.Radius)},"afterInit":function afterInit(){m.setState({"btnWidth":2*this.maxBtnRadius,"btnHeight":2*this.maxBtnRadius})},"afterStart":function afterStart(){v.showCanvas()}}),(0,nt.A)((0,nt.A)({},w),{},{"width":d.width,"height":d.height,"start":function start(){w.onStart&&w.onStart.apply(w,arguments)},"end":function end(){w.onEnd&&w.onEnd.apply(w,arguments),v.hideCanvas()}}));this.setState({"myLucky":C})}},{"key":"init","value":function init(){var d;(d=this.state.myLucky).init.apply(d,arguments)}},{"key":"play","value":function play(){var d;(d=this.state.myLucky).play.apply(d,arguments)}},{"key":"stop","value":function stop(){var d;(d=this.state.myLucky).stop.apply(d,arguments)}},{"key":"toPlay","value":function toPlay(){this.state.myLucky.startCallback()}},{"key":"render","value":function render(){var d=this,v=this.props,m=this.state,w=this.flag,k={"width":m.boxWidth+"px","height":m.boxHeight+"px"},S={"width":m.btnWidth+"px","height":m.btnHeight+"px"},C=m.myLucky&&"WEB"!==w;return"WEB"===w?(0,It.jsx)("div",{"id":v.canvasId}):(0,It.jsxs)(T.Ss,{"className":"lucky-box","style":k,"children":[(0,It.jsx)(T.Hl,{"type":"2d","className":"lucky-canvas","id":v.canvasId,"canvasId":v.canvasId,"style":k}),(0,It.jsx)(T._V,{"src":m.imgSrc,"onLoad":function onLoad(){return m.myLucky.clearCanvas()},"style":k}),(0,It.jsx)(T.Ss,{"className":"lucky-wheel-btn","onClick":function onClick(v){return d.toPlay(v)},"style":S}),C?(0,It.jsx)(T.Ss,{"className":"lucky-imgs","children":v.blocks.map((function(v,m){return(0,It.jsx)(T.Ss,{"children":v.imgs?(0,It.jsx)(T.Ss,{"children":v.imgs.map((function(v,w){return(0,It.jsx)(T._V,{"src":v.src,"onLoad":function onLoad(v){return d.imgBindload(v,"blocks",m,w)}},w)}))}):null},m)}))}):null,C?(0,It.jsx)(T.Ss,{"className":"lucky-imgs","children":v.prizes.map((function(v,m){return(0,It.jsx)(T.Ss,{"children":v.imgs?(0,It.jsx)(T.Ss,{"children":v.imgs.map((function(v,w){return(0,It.jsx)(T._V,{"src":v.src,"onLoad":function onLoad(v){return d.imgBindload(v,"prizes",m,w)}},w)}))}):null},m)}))}):null,C?(0,It.jsx)(T.Ss,{"className":"lucky-imgs","children":v.buttons.map((function(v,m){return(0,It.jsx)(T.Ss,{"children":v.imgs?(0,It.jsx)(T.Ss,{"children":v.imgs.map((function(v,w){return(0,It.jsx)(T._V,{"src":v.src,"onLoad":function onLoad(v){return d.imgBindload(v,"buttons",m,w)}},w)}))}):null},m)}))}):null]})}}]);var v}(_.Component);Lt.defaultProps={"canvasId":"lucky-wheel","width":"600rpx","height":"600rpx","blocks":[],"prizes":[],"buttons":[],"defaultStyle":{},"defaultConfig":{}};var Pt=function(d){function LuckyGrid(d){var v;return(0,P.A)(this,LuckyGrid),v=(0,ut.A)(this,LuckyGrid,[d]),(0,w.A)(v,"flag","WEB"),(0,w.A)(v,"ctx",null),(0,w.A)(v,"canvas",null),(0,w.A)(v,"state",{"imgSrc":"","myLucky":null,"boxWidth":300,"boxHeight":300,"btns":[],"btnShow":!1}),v}return(0,ht.A)(LuckyGrid,d),(0,M.A)(LuckyGrid,[{"key":"componentDidMount","value":function componentDidMount(){this.initLucky()}},{"key":"componentDidUpdate","value":function componentDidUpdate(d){var v=this.props,m=this.state;m.myLucky&&(v.cols!==d.cols&&(m.myLucky.cols=v.cols),v.rows!==d.rows&&(m.myLucky.rows=v.rows),v.blocks!==d.blocks&&(m.myLucky.blocks=v.blocks),v.prizes!==d.prizes&&(m.myLucky.prizes=v.prizes),v.buttons!==d.buttons&&(m.myLucky.buttons=v.buttons))}},{"key":"imgBindload","value":(m=_asyncToGenerator((0,k.A)().mark((function _callee(d,v,m,w){var S;return(0,k.A)().wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:S=this.props[v][m].imgs[w],zt(S,this.canvas);case 2:case"end":return d.stop()}}),_callee,this)}))),function imgBindload(d,v,w,k){return m.apply(this,arguments)})},{"key":"imgBindloadActive","value":(v=_asyncToGenerator((0,k.A)().mark((function _callee2(d,v,m,w){var S;return(0,k.A)().wrap((function _callee2$(d){for(;;)switch(d.prev=d.next){case 0:S=this.props[v][m].imgs[w],zt(S,this.canvas,"activeSrc","$activeResolve");case 2:case"end":return d.stop()}}),_callee2,this)}))),function imgBindloadActive(d,m,w,k){return v.apply(this,arguments)})},{"key":"getImage","value":function getImage(){var d=(0,ft.nI)().page;return utils_getImage.call(d,this.props.canvasId,this.canvas)}},{"key":"showCanvas","value":function showCanvas(){this.setState({"imgSrc":""})}},{"key":"hideCanvas","value":function hideCanvas(){var d=this;"WEB"!==this.flag&&this.getImage().then((function(v){if("canvasToTempFilePath:ok"!==v.errMsg)return console.error(v);d.setState({"imgSrc":v.tempFilePath})}))}},{"key":"initLucky","value":function initLucky(){var d=this,v=this.props;this.setState({"boxWidth":Tt(v.width),"boxHeight":Tt(v.height)},(function(){setTimeout((function(){d.getConfig()}),100)}))}},{"key":"getConfig","value":function getConfig(){var d=this,v=this.flag,m=this.dpr=gt().pixelRatio;if("WEB"===v){var w=document.querySelector("#".concat(this.props.canvasId));this.drawLucky({"dpr":m,"flag":v,"divElement":w,"width":this.state.boxWidth,"height":this.state.boxHeight,"rAF":requestAnimationFrame})}else{var k=(0,ft.nI)().page;X().in(k).select("#".concat(this.props.canvasId)).fields({"node":!0,"size":!0}).exec((function(w){if(!w[0]||!w[0].node)return console.error("lucky-canvas 获取不到 canvas 标签");var k=w[0],S=k.node,C=k.width,_=k.height,E=d.canvas=S,O=d.ctx=E.getContext("2d");E.width=C*m,E.height=_*m,O.scale(m,m),d.drawLucky({"dpr":m,"flag":v,"ctx":O,"width":C,"height":_})}))}}},{"key":"drawLucky","value":function drawLucky(d){var v=this,m=this,w=this.props,k=new Ct((0,nt.A)((0,nt.A)({},d),{},{"setTimeout":setTimeout,"clearTimeout":clearTimeout,"setInterval":setInterval,"clearInterval":clearInterval,"unitFunc":function unitFunc(d,v){return Tt(d+v)},"afterInit":function afterInit(){var d=this,v=[];w.buttons.forEach((function(m,w){if(m){var k=d.getGeometricProperty([m.x,m.y,m.col||1,m.row||1]),C=(0,S.A)(k,4),_=C[0],E=C[1],O=C[2],T=C[3];v[w]={"top":E,"left":_,"width":O,"height":T}}})),m.setState({"btns":v,"btnShow":!0})},"afterStart":function afterStart(){v.showCanvas()}}),(0,nt.A)((0,nt.A)({},w),{},{"width":d.width,"height":d.height,"start":function start(){w.onStart&&w.onStart.apply(w,arguments)},"end":function end(){w.onEnd&&w.onEnd.apply(w,arguments),v.hideCanvas()}}));this.setState({"myLucky":k})}},{"key":"init","value":function init(){var d;(d=this.state.myLucky).init.apply(d,arguments)}},{"key":"play","value":function play(){var d;(d=this.state.myLucky).play.apply(d,arguments)}},{"key":"stop","value":function stop(){var d;(d=this.state.myLucky).stop.apply(d,arguments)}},{"key":"toPlay","value":function toPlay(d){this.state.myLucky.startCallback(d)}},{"key":"render","value":function render(){var d=this,v=this.props,m=this.state,w=this.flag,k={"width":m.boxWidth+"px","height":m.boxHeight+"px"},S=m.myLucky&&"WEB"!==w;return"WEB"===w?(0,It.jsx)("div",{"id":v.canvasId}):(0,It.jsxs)(T.Ss,{"className":"lucky-box","style":k,"children":[(0,It.jsx)(T.Hl,{"type":"2d","className":"lucky-canvas","id":v.canvasId,"canvasId":v.canvasId,"style":k}),(0,It.jsx)(T._V,{"src":m.imgSrc,"onLoad":function onLoad(){return m.myLucky.clearCanvas()},"style":k}),m.btnShow?(0,It.jsx)(T.Ss,{"children":m.btns.map((function(v,m){return(0,It.jsx)(T.Ss,{"className":"lucky-grid-btn","onClick":function onClick(m){return d.toPlay(v)},"style":{"top":v.top+"px","left":v.left+"px","width":v.width+"px","height":v.height+"px"}},m)}))}):null,S?(0,It.jsx)(T.Ss,{"className":"lucky-imgs","children":v.blocks.map((function(v,m){return(0,It.jsx)(T.Ss,{"children":v.imgs?(0,It.jsx)(T.Ss,{"children":v.imgs.map((function(v,w){return(0,It.jsx)(T._V,{"src":v.src,"onLoad":function onLoad(v){return d.imgBindload(v,"blocks",m,w)}},w)}))}):null},m)}))}):null,S?(0,It.jsx)(T.Ss,{"className":"lucky-imgs","children":v.prizes.map((function(v,m){return(0,It.jsx)(T.Ss,{"children":v.imgs?(0,It.jsx)(T.Ss,{"children":v.imgs.map((function(v,w){return(0,It.jsxs)(T.Ss,{"children":[(0,It.jsx)(T._V,{"src":v.src,"onLoad":function onLoad(v){return d.imgBindload(v,"prizes",m,w)}}),(0,It.jsx)(T._V,{"src":v.activeSrc,"onLoad":function onLoad(v){return d.imgBindloadActive(v,"prizes",m,w)}})]},w)}))}):null},m)}))}):null,S?(0,It.jsx)(T.Ss,{"className":"lucky-imgs","children":v.buttons.map((function(v,m){return(0,It.jsx)(T.Ss,{"children":v.imgs?(0,It.jsx)(T.Ss,{"children":v.imgs.map((function(v,w){return(0,It.jsx)(T._V,{"src":v.src,"onLoad":function onLoad(v){return d.imgBindload(v,"buttons",m,w)}},w)}))}):null},m)}))}):null]})}}]);var v,m}(_.Component);Pt.defaultProps={"canvasId":"lucky-grid","width":"600rpx","height":"600rpx","cols":3,"rows":3,"blocks":[],"prizes":[],"buttons":[],"defaultStyle":{},"activeStyle":{},"defaultConfig":{}};var Mt=(0,R.x7)("createOffscreenCanvas"),jt=function(d){function SlotMachine(d){var v;return(0,P.A)(this,SlotMachine),v=(0,ut.A)(this,SlotMachine,[d]),(0,w.A)(v,"flag","WEB"),(0,w.A)(v,"ctx",null),(0,w.A)(v,"canvas",null),(0,w.A)(v,"state",{"imgSrc":"","myLucky":null,"boxWidth":300,"boxHeight":300}),v}return(0,ht.A)(SlotMachine,d),(0,M.A)(SlotMachine,[{"key":"componentDidMount","value":function componentDidMount(){this.initLucky()}},{"key":"componentDidUpdate","value":function componentDidUpdate(d){var v=this.props,m=this.state;m.myLucky&&(v.blocks!==d.blocks&&(m.myLucky.blocks=v.blocks),v.prizes!==d.prizes&&(m.myLucky.prizes=v.prizes),v.slots!==d.slots&&(m.myLucky.slots=v.slots))}},{"key":"imgBindload","value":(v=_asyncToGenerator((0,k.A)().mark((function _callee(d,v,m,w){var S;return(0,k.A)().wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:S=this.props[v][m].imgs[w],zt(S,this.canvas);case 2:case"end":return d.stop()}}),_callee,this)}))),function imgBindload(d,m,w,k){return v.apply(this,arguments)})},{"key":"getImage","value":function getImage(){var d=(0,ft.nI)().page;return utils_getImage.call(d,this.props.canvasId,this.canvas)}},{"key":"showCanvas","value":function showCanvas(){this.setState({"imgSrc":""})}},{"key":"hideCanvas","value":function hideCanvas(){var d=this;"WEB"!==this.flag&&this.getImage().then((function(v){if("canvasToTempFilePath:ok"!==v.errMsg)return console.error(v);d.setState({"imgSrc":v.tempFilePath})}))}},{"key":"initLucky","value":function initLucky(){var d=this,v=this.props;this.setState({"boxWidth":Tt(v.width),"boxHeight":Tt(v.height)},(function(){setTimeout((function(){d.getConfig()}),100)}))}},{"key":"getConfig","value":function getConfig(){var d=this,v=this.flag,m=this.dpr=gt().pixelRatio;if("WEB"===v){var w=document.querySelector("#".concat(this.props.canvasId));this.drawLucky({"dpr":m,"flag":v,"divElement":w,"width":this.state.boxWidth,"height":this.state.boxHeight,"rAF":requestAnimationFrame})}else{var k=(0,ft.nI)().page;X().in(k).select("#".concat(this.props.canvasId)).fields({"node":!0,"size":!0}).exec((function(w){if(!w[0]||!w[0].node)return console.error("lucky-canvas 获取不到 canvas 标签");var k=w[0],S=k.node,C=k.width,_=k.height,E=d.canvas=S,O=d.ctx=E.getContext("2d");E.width=C*m,E.height=_*m,O.scale(m,m),d.drawLucky({"dpr":m,"flag":v,"ctx":O,"width":C,"height":_,"offscreenCanvas":Mt({"type":"2d"})})}))}}},{"key":"drawLucky","value":function drawLucky(d){var v=this,m=this.props,w=(this.flag,this.ctx,new _t((0,nt.A)((0,nt.A)({},d),{},{"setTimeout":setTimeout,"clearTimeout":clearTimeout,"setInterval":setInterval,"clearInterval":clearInterval,"unitFunc":function unitFunc(d,v){return Tt(d+v)},"afterStart":function afterStart(){v.showCanvas()}}),(0,nt.A)((0,nt.A)({},m),{},{"width":d.width,"height":d.height,"end":function end(){m.onEnd&&m.onEnd.apply(m,arguments),v.hideCanvas()}})));this.setState({"myLucky":w})}},{"key":"init","value":function init(){var d;(d=this.state.myLucky).init.apply(d,arguments)}},{"key":"play","value":function play(){var d;(d=this.state.myLucky).play.apply(d,arguments)}},{"key":"stop","value":function stop(){var d;(d=this.state.myLucky).stop.apply(d,arguments)}},{"key":"render","value":function render(){var d=this,v=this.props,m=this.state,w=this.flag,k={"width":m.boxWidth+"px","height":m.boxHeight+"px"},S=m.myLucky&&"WEB"!==w;return"WEB"===w?(0,It.jsx)("div",{"id":v.canvasId}):(0,It.jsxs)(T.Ss,{"className":"lucky-box","style":k,"children":[(0,It.jsx)(T.Hl,{"type":"2d","className":"lucky-canvas","id":v.canvasId,"canvasId":v.canvasId,"style":k}),(0,It.jsx)(T._V,{"src":m.imgSrc,"onLoad":function onLoad(){return m.myLucky.clearCanvas()},"style":k}),S?(0,It.jsx)(T.Ss,{"className":"lucky-imgs","children":v.blocks.map((function(v,m){return(0,It.jsx)(T.Ss,{"children":v.imgs?(0,It.jsx)(T.Ss,{"children":v.imgs.map((function(v,w){return(0,It.jsx)(T._V,{"src":v.src,"onLoad":function onLoad(v){return d.imgBindload(v,"blocks",m,w)}},w)}))}):null},m)}))}):null,S?(0,It.jsx)(T.Ss,{"className":"lucky-imgs","children":v.prizes.map((function(v,m){return(0,It.jsx)(T.Ss,{"children":v.imgs?(0,It.jsx)(T.Ss,{"children":v.imgs.map((function(v,w){return(0,It.jsx)(T._V,{"src":v.src,"onLoad":function onLoad(v){return d.imgBindload(v,"prizes",m,w)}},w)}))}):null},m)}))}):null]})}}]);var v}(_.Component);jt.defaultProps={"canvasId":"slot-machine","width":"600rpx","height":"600rpx","blocks":[],"prizes":[],"slots":[],"defaultStyle":{},"defaultConfig":{}};var Wt=m(8712);var Rt=function Index(){var d=(0,_.useRef)(null),v={"blocks":[{"padding":"30px","imgs":[{"src":"https://cdn.jsdelivr.net/gh/0326/imgs@main/blog/wheelbg.png","width":"100%","height":"100%"}]}],"prizes":[{"imgs":[{"src":"https://r.hpoi.net/gk/cover/s/2022/05/67b769e21b4f4779b5cefaf3a0a8a8b5.jpg","width":"40%","top":"40%"}],"fonts":[{"text":"大和一番赏","fontSize":"12px","top":"10%"}],"background":"#e9e8fe"},{"imgs":[{"src":"https://r.hpoi.net/gk/cover/s/2025/03/ca8855a3d1ba43ec8e7e49f724a7b55a.jpg","width":"40%","top":"40%"}],"fonts":[{"text":"女帝","fontSize":"12px","top":"10%"}],"background":"#f0b9d9"},{"imgs":[{"src":"https://r.hpoi.net/gk/cover/s/2022/05/67b769e21b4f4779b5cefaf3a0a8a8b5.jpg","width":"40%","top":"40%"}],"fonts":[{"text":"大和一番赏","fontSize":"12px","top":"10%"}],"background":"#e9e8fe"},{"imgs":[{"src":"https://r.hpoi.net/gk/cover/s/2025/03/ca8855a3d1ba43ec8e7e49f724a7b55a.jpg","width":"40%","top":"40%"}],"fonts":[{"text":"女帝","fontSize":"12px","top":"10%"}],"background":"#f0b9d9"},{"imgs":[{"src":"https://r.hpoi.net/gk/cover/s/2022/05/67b769e21b4f4779b5cefaf3a0a8a8b5.jpg","width":"40%","top":"40%"}],"fonts":[{"text":"大和一番赏","fontSize":"12px","top":"10%"}],"background":"#e9e8fe"},{"imgs":[{"src":"https://r.hpoi.net/gk/cover/s/2025/03/ca8855a3d1ba43ec8e7e49f724a7b55a.jpg","width":"40%","top":"40%"}],"fonts":[{"text":"女帝","fontSize":"12px","top":"10%"}],"background":"#f0b9d9"}],"buttons":[{"radius":"40px","background":"#617df2"},{"radius":"40px","imgs":[{"src":"https://cdn.jsdelivr.net/gh/0326/imgs@main/blog/startlottery.png","width":"100%","top":"-190%"}]}]};return(0,It.jsxs)(T.Ss,{"className":"nutui-page-lottery","children":[(0,It.jsx)(et,{"safeAreaInsetTop":!0,"fixed":!0,"back":(0,It.jsx)(lt,{}),"onBackClick":function onBackClick(){Wt.Ay.navigateBack()},"children":"手办周边大抽奖"}),(0,It.jsx)(T.Ss,{"className":"lottery-container","children":(0,It.jsx)(Lt,{"ref":d,"width":"300px","height":"300px","blocks":v.blocks,"prizes":v.prizes,"buttons":v.buttons,"onStart":function onStart(){var v;null===(v=d.current)||void 0===v||v.play(),setTimeout((function(){var v;null===(v=d.current)||void 0===v||v.stop(0)}),2500)},"onEnd":function onEnd(d){console.log(d)}})})]})}}}]);